(function(i){var k=new Array();var f=new Hashtable();String.prototype.startsWith=function(o){return(this.match("^"+o)==o)};function h(r,o,q,p){this.id=0;this.titleValue=r;this.startDt=o;this.endDt=q;this.backgroundColor=null;this.foregroundColor=null;this.agendaData=p;this.setBackgroundColor=function(s){this.backgroundColor=s};this.setForegroundColor=function(s){this.foregroundColor=s};this.getBackgroundColor=function(){return this.backgroundColor};this.getForegroundColor=function(){return this.foregroundColor};this.setAgendaId=function(s){this.id=s};this.getAgendaId=function(){return this.id};this.getStartDate=function(){return this.startDt};this.getEndDate=function(){return this.endDt};this.getTitle=function(){return this.titleValue};this.addAgendaData=function(s,t){this.agendaData.put(s,t)};this.getAgendaData=function(s){return this.agendaData.get(s)};this.getAgendaDataHash=function(){return this.agendaData};this.toString=function(){var v="Title: "+this.titleValue+"\n";v+="Start Date: "+this.startDt+"\n";v+="End Date: "+this.endDt+"\n";if(this.agendaData!=null&&this.agendaData.size()>0){var w=this.agendaData.keys();for(var t=0;t<w.length;t++){var u=w[t];var x=this.getAgendaData(u);v+=u+": "+x+"\n"}}return v}}function e(o){this.jqyObj=o;this.date=null;this.agendaDivHash=new Hashtable();this.jqyMoreDiv=null;this.addClass=function(p){this.jqyObj.addClass(p)};this.addMoreDiv=function(p){if(this.jqyMoreDiv==null){this.jqyMoreDiv=p;this.appendHtml(p)}else{this.jqyMoreDiv.remove();this.jqyMoreDiv=p;this.appendHtml(p)}};this.hasMoreDiv=function(){if(this.jqyMoreDiv!=null){return true}return false};this.addAgendaDivElement=function(q,p){this.agendaDivHash.put(q,p)};this.clearAgendaDivElements=function(){this.clearHtml();this.jqyMoreDiv=null;this.agendaDivHash=new Hashtable()};this.getNextAgendaYstartY=function(p,v,s){var w=p;var u=this.agendaDivHash.values();if(u!=null&&u.length>0){u.sort(this.sortDivByY);var t=0;var r=0;for(var q=0;q<u.length;q++){t=parseInt(u[q].css("top").replace("px",""));r=t+parseInt(u[q].css("height").replace("px",""))+1;if((t+2-w)>(v+1)){}else{if(!(r<w)){w=r}}}}if(w>((this.getY()+this.getHeight())-(v+1)-(s+1))){return -1}return parseInt(w)};this.sortDivByY=function(q,p){var s=parseInt(q.css("top").replace("px",""));var r=parseInt(p.css("top").replace("px",""));if(s<r){return -1}else{if(s>r){return 1}else{return 0}}};this.debugDivElements=function(){var u=this.agendaDivHash.values();if(u!=null&&u.length>0){u.sort(this.sortDivByY);var r=u.length+" agenda div elements for "+this.date+":\n\n";var t=0;var q=0;for(var p=0;p<u.length;p++){t=parseInt(u[p].css("top").replace("px",""));q=t+parseInt(u[p].css("height").replace("px",""))+1;r+="Top: "+t+", Bottom: "+q+"\n"}alert(r)}else{alert("No agenda div elements for "+this.date)}};this.setDate=function(p){this.date=p};this.getDate=function(){return this.date};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(p){this.jqyObj.height(p)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(p){this.jqyObj.width(p)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.setHtml=function(p){this.jqyObj.html(p)};this.appendHtml=function(p){this.jqyObj.append(p)};this.clearHtml=function(){this.setHtml("")};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.addClickHandler=function(p){this.jqyObj.bind("click",{calDayDate:this.date},p)}}function g(o){this.jqyObj=o;this.addClass=function(p){this.jqyObj.addClass(p)};this.setHtml=function(p){this.jqyObj.html(p)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(p){this.jqyObj.height(p)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(p){this.jqyObj.width(p)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()}}function b(o){this.jqyObj=o;this.date=null;this.addClass=function(p){this.jqyObj.addClass(p)};this.setDate=function(p){this.date=p};this.getDate=function(){return this.date};this.setHtml=function(p){this.jqyObj.html(p)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(p){this.jqyObj.height(p)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(p){this.jqyObj.width(p)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()};this.addClickHandler=function(p){this.jqyObj.bind("click",{calDayDate:this.date},p)}}function l(o){this.jqyObj=o;this.headerCells=new Array();this.appendCalendarHeaderCell=function(p){this.headerCells.push(p);this.jqyObj.append(p.jqyObj)};this.getHeaderCells=function(){return this.headerCells};this.setHtml=function(p){this.jqyObj.html(p)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.setWidth=function(p){this.jqyObj.width(p)}}function n(o){this.jqyObj=o;this.weekHeaderCells=new Array();this.appendCalendarWeekHeaderCell=function(p){this.weekHeaderCells.push(p);this.jqyObj.append(p.jqyObj)};this.getHeaderCells=function(){return this.weekHeaderCells};this.setHtml=function(p){this.jqyObj.html(p)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.setWidth=function(p){this.jqyObj.width(p)}}function j(o){this.jqyObj=o;this.days=new Array();this.appendCalendarDayCell=function(p){this.days.push(p);this.jqyObj.append(p.jqyObj)};this.getDays=function(){return this.days};this.setHtml=function(p){this.jqyObj.html(p)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(p,q){this.jqyObj.css(p,q)};this.getCss=function(p){return this.jqyObj.css(p)};this.setAttr=function(q,p){this.jqyObj.attr(q,p)};this.getAttr=function(p){return this.jqyObj.attr(p)};this.setWidth=function(p){this.jqyObj.width(p)}}function d(){this.jqyObj=null;this.calHeaderObj=null;this.weeks=new Array();this.weekHeaders=new Array();this.displayDate=new Date();this.agendaItems=new Hashtable();this.dayHash=new Hashtable();this.clickEvent_dayCell=null;this.clickEvent_agendaCell=null;this.agendaId=1;this.cellBorderWidth=1;this.dayCellHeaderCellHeight=17;this.agendaItemHeight=15;this.aspectRatio=1;this.initialize=function(o,p,r,q){this.jqyObj=o;this.displayDate=p;this.clickEvent_dayCell=r;this.clickEvent_agendaCell=q;this.do_init()};this.do_init=function(){this.clear(false);var y;var I=this.buildCalendarHeader();for(var F=0;F<d.dayNames.length;F++){y=this.buildCalendarHeaderCell();y.setHtml("&nbsp;"+d.dayNames[F]);I.appendCalendarHeaderCell(y);if(F==6){y.addClass("JFrontierCal-Header-Cell-Last")}}this.addHeader(I);var q=this.getCurrentYear();var z=this.getCurrentMonth();var r=this.getDaysCurrentMonth();var t=this.getDaysPreviousMonth();var E=this.getDaysNextMonth();var O=new Date(this.getCurrentYear(),this.getCurrentMonth(),1,0,0,0,0);var v=new Date(this.getCurrentYear(),this.getCurrentMonth(),r,0,0,0,0);var J=O.getDay();var s=v.getDay();var x=r+J;if(s>0){x+=d.dayNames.length-s-1}var G=Math.ceil(x/d.dayNames.length);var H=1;var B=null;var C=(t-J)+1;var w;var N;var o;var L;N=this.buildCalendarWeek();L=this.buildCalendarWeekHeader();for(var F=0;F<d.dayNames.length;F++){w=this.buildCalendarDayCell();o=this.buildCalendarWeekHeaderCell();if(F<J){B=new Date(q,(z-1),C,0,0,0,0);w.setDate(B);o.setDate(B);o.setHtml(C+"&nbsp;");w.addClass("JFrontierCal-PrevMonth-Day-Cell");o.addClass("JFrontierCal-PrevMonth-Week-Header-Cell");C+=1}else{B=new Date(q,z,H,0,0,0,0);w.setDate(B);o.setDate(B);o.setHtml(H+"&nbsp;");H+=1}if(F==6){w.addClass("JFrontierCal-Day-Cell-Last");o.addClass("JFrontierCal-Week-Header-Cell-Last")}if(this.clickEvent_dayCell!=null){w.addClickHandler(this.clickEvent_dayCell);o.addClickHandler(this.clickEvent_dayCell)}L.appendCalendarWeekHeaderCell(o);N.appendCalendarDayCell(w);this.dayHash.put((w.getDate().getFullYear()+"")+(w.getDate().getMonth()+"")+(w.getDate().getDate()+""),w)}this.addWeekHeader(L);this.addWeek(N);for(var K=2;K<G;K++){N=this.buildCalendarWeek();L=this.buildCalendarWeekHeader();for(var F=0;F<d.dayNames.length;F++){w=this.buildCalendarDayCell();o=this.buildCalendarWeekHeaderCell();B=new Date(q,z,H,0,0,0,0);w.setDate(B);o.setDate(B);o.setHtml(H+"&nbsp;");if(this.clickEvent_dayCell!=null){w.addClickHandler(this.clickEvent_dayCell);o.addClickHandler(this.clickEvent_dayCell)}H+=1;L.appendCalendarWeekHeaderCell(o);N.appendCalendarDayCell(w);if(F==6){w.addClass("JFrontierCal-Day-Cell-Last");o.addClass("JFrontierCal-Week-Header-Cell-Last")}this.dayHash.put((w.getDate().getFullYear()+"")+(w.getDate().getMonth()+"")+(w.getDate().getDate()+""),w)}this.addWeekHeader(L);this.addWeek(N)}var A=1;N=this.buildCalendarWeek();L=this.buildCalendarWeekHeader();for(var F=0;F<d.dayNames.length;F++){w=this.buildCalendarDayCell();o=this.buildCalendarWeekHeaderCell();if(H<=r){B=new Date(q,z,H,0,0,0,0);w.setDate(B);o.setDate(B);o.setHtml(H+"&nbsp;")}else{B=new Date(q,(z+1),A,0,0,0,0);w.setDate(B);o.setDate(B);o.setHtml(A+"&nbsp;");w.addClass("JFrontierCal-NextMonth-Day-Cell");o.addClass("JFrontierCal-NextMonth-Week-Header-Cell");A+=1}if(F==6&&H<=r){w.addClass("JFrontierCal-Day-Cell-Last");o.addClass("JFrontierCal-Week-Header-Cell-Last")}else{if(F==6&&H>r){w.addClass("JFrontierCal-NextMonth-Day-Cell-Last");o.addClass("JFrontierCal-NextMonth-Week-Header-Cell-Last")}}H+=1;if(this.clickEvent_dayCell!=null){w.addClickHandler(this.clickEvent_dayCell);o.addClickHandler(this.clickEvent_dayCell)}L.appendCalendarWeekHeaderCell(o);N.appendCalendarDayCell(w);this.dayHash.put((w.getDate().getFullYear()+"")+(w.getDate().getMonth()+"")+(w.getDate().getDate()+""),w)}this.addWeekHeader(L);this.addWeek(N);var D=parseInt(y.jqyObj.outerHeight(true));var u=parseInt(w.jqyObj.outerHeight(true)*G);var p=parseInt(o.jqyObj.outerHeight(true));var M=u+D+p;this.setCss("height",M+"px");this.jqyObj.addClass("JFrontierCal");this.renderAgendaItems()};this.getAgendaItemsForDay=function(p){if(this.agendaItems==null||this.agendaItems.size()==0){return}var o=this.agendaItems.values();var s=null;var r=null;var u=new Array();for(var q=0;q<this.agendaItems.size();q++){var t=o[q];s=t.getStartDate();r=t.getEndDate();if(m.isDateBetween(p,s,r)){u.push(t)}}return u};this.renderAgendaItems=function(){if(this.agendaItems==null||this.agendaItems.size()==0){return}var o=this.agendaItems.values();for(var p=0;p<this.agendaItems.size();p++){var q=o[p];this.renderSingleAgendaItem(q)}};this.renderSingleAgendaItem=function(u){if(u==null){return}if(this.weeks==null||this.weeks.length==0){return}var s=u.getAgendaId();var t=u.getStartDate();var A=u.getEndDate();if(t==null||A==null){return}var C=null;var E=this.weeks[0].getDays();if(E!=null&&E.length>0){C=E[0]}var B=null;var G=this.weeks[this.weeks.length-1].getDays();if(G!=null&&G.length>0){B=G[G.length-1]}if(C==null||B==null){return}var v=C.getDate();var q=B.getDate();if(m.daysDifferenceDirection(v,A)<0){return}if(m.daysDifferenceDirection(q,t)>0){return}var x=null;var r=null;if(m.daysDifferenceDirection(v,t)<0){x=v}else{if(m.daysDifferenceDirection(v,t)==0){x=v}else{x=t}}if(m.daysDifferenceDirection(q,A)>0){r=q}else{if(m.daysDifferenceDirection(q,A)==0){r=q}else{r=A}}var o=x.getDay();var w=r.getDay();if((m.daysDifference(x,r)+o)>6){var z=m.getAgendaDisplayTime(u.getStartDate())+" "+u.getTitle();var y=m.getLastDayInSameWeek(x);this.renderAgendaDivElement(u,z,this.getCalendarDayObjByDate(x),this.getCalendarDayObjByDate(y),true,false);z=u.getTitle();while(m.daysDifferenceDirection(r,y)<0){var p=m.getFirstDayNextWeek(y);y=m.getLastDayInSameWeek(p);if(m.daysDifferenceDirection(r,y)<0){this.renderAgendaDivElement(u,z,this.getCalendarDayObjByDate(p),this.getCalendarDayObjByDate(y),false,false)}else{this.renderAgendaDivElement(u,z,this.getCalendarDayObjByDate(p),this.getCalendarDayObjByDate(r),false,true)}}}else{var F=this.getCalendarDayObjByDate(x);var D=this.getCalendarDayObjByDate(r);var z=m.getAgendaDisplayTime(u.getStartDate())+" "+u.getTitle();this.renderAgendaDivElement(u,z,F,D,true,true)}};this.renderAgendaDivElement=function(w,s,p,y,A,r){if(s==null||p==null||y==null){return}var t=p.getX()+1;var B=y.getX()+y.getWidth()-1;var o=B-t;var x=1;var q=this.agendaItemHeight;var v=q;var z=this.getNextAgendaYPosition(p,y,q,v);if(z>0){var u=i("<div/>");u.addClass("JFrontierCal-Agenda-Item");if(w.getBackgroundColor()!=null){u.css("background-color",w.getBackgroundColor())}if(w.getForegroundColor()!=null){u.css("color",w.getForegroundColor())}u.css("position","absolute");u.css("left",t+"px");u.css("top",z+"px");u.css("width",o+"px");if(A){u.css("-moz-border-radius-bottomleft","3px");u.css("-moz-border-radius-topleft","3px");u.css("-webkit-border-bottom-left-radius","3px");u.css("-webkit-border-top-left-radius","3px")}if(r){u.css("-moz-border-radius-topright","3px");u.css("-moz-border-radius-bottomright","3px");u.css("-webkit-border-top-right-radius","3px");u.css("-webkit-border-bottom-right-radius","3px")}u.html(s);if(this.clickEvent_agendaCell!=null){u.bind("click",{agendaId:w.getAgendaId(),callBack:this.clickEvent_agendaCell},this.clickAgendaFromCalendarHandler)}u.hover(function(){i(this).css("cursor","pointer")},function(){i(this).css("cursor","auto")});this.addAgendaDivToDays(p,y,u,w.getAgendaId());p.appendHtml(u)}else{this.addMoreDivToDays(p,y,v)}};this.clickAgendaFromCalendarHandler=function(p){p.stopPropagation();var o=p.data.callBack;if(o!=null){o(p)}};this.clickAgendaFromCalendarMoreModalDialog=function(q){var o=q.data.dialog;if(o!=null){o.dialog("close")}var p=q.data.callBack;if(p!=null){p(q)}q.stopPropagation()};this.addMoreDivToDays=function(p,u,y){if(p==null||u==null||y==null){return}var s=p.getDate();var v=u.getDate();var q=m.getNextDay(s);var w=i("<div/>");w.addClass("JFrontierCal-Agenda-More-Link");w.css("position","absolute");var x=this.getAgendaItemsForDay(s);w.html("+ more ("+x.length+")");w.bind("click",{cal:this,calDayDate:s,agendaItems:x},function(A){A.stopPropagation();d.showMoreAgendaModal(A.data.cal,A.data.calDayDate,A.data.agendaItems)});w.hover(function(){i(this).css("cursor","pointer")},function(){i(this).css("cursor","auto")});var r=(p.getY()+p.getHeight())-y-1;var t=p.getX();var o=p.getWidth();w.css("top",r+"px");w.css("left",t+"px");w.css("width",o+"px");w.css("height",y+"px");p.addMoreDiv(w);while(m.daysDifferenceDirection(q,v)>=0){var z=this.getCalendarDayObjByDate(q);s=z.getDate();w=i("<div/>");w.addClass("JFrontierCal-Agenda-More-Link");w.css("position","absolute");x=this.getAgendaItemsForDay(s);w.html("+ more ("+x.length+")");w.bind("click",{cal:this,calDayDate:s,agendaItems:x},function(A){A.stopPropagation();d.showMoreAgendaModal(A.data.cal,A.data.calDayDate,A.data.agendaItems)});w.hover(function(){i(this).css("cursor","pointer")},function(){i(this).css("cursor","auto")});r=(z.getY()+z.getHeight())-y-1;t=z.getX();o=z.getWidth();w.css("top",r+"px");w.css("left",t+"px");w.css("width",o+"px");w.css("height",y+"px");z.addMoreDiv(w);q=m.getNextDay(q)}};this.addAgendaDivToDays=function(r,v,q,u){if(r==null||v==null||q==null||u==null){return}r.addAgendaDivElement(u,q);var t=r.getDate();var s=v.getDate();var o=m.getNextDay(t);while(m.daysDifferenceDirection(o,s)>=0){var p=this.getCalendarDayObjByDate(o);p.addAgendaDivElement(u,q);o=m.getNextDay(o)}};this.getNextAgendaYPosition=function(q,v,r,y){if(q==null||v==null||r==null||y==null){return -1}var o=0;var B=q.getY();o=B;var C=null;var D=false;var A=null;var s=1;var x=100;while(!D||s<=x){A=new Array();B=q.getNextAgendaYstartY(B,r,y);if(B>o){o=B}A.push(B);var u=q.getDate();var w=v.getDate();var p=m.getNextDay(u);while(m.daysDifferenceDirection(p,w)>=0){C=this.getCalendarDayObjByDate(p);B=C.getNextAgendaYstartY(B,r,y);if(B>o){o=B}A.push(B);p=m.getNextDay(p)}B=A[0];if(B<0){return -1}else{if(A.length==1){return B}}var z=true;for(var t=1;t<A.length;t++){if(A[t]<0){return -1}else{if(Math.abs(B-A[t])>1){z=false}}}if(z){return B}B=o;s+=1}return B};this.getCalendarDayObjByDate=function(q){if(q==null){return null}if(this.weeks==null||this.getNumberWeeks()==0){return null}for(var s=0;s<this.getNumberWeeks();s++){var p=this.weeks[s].getDays();if(p!=null&&p.length>0){for(var r=0;r<p.length;r++){var t=p[r];var o=t.getDate();if(o!=null){if(o.getFullYear()==q.getFullYear()&&o.getMonth()==q.getMonth()&&o.getDate()==q.getDate()){return t}}}}}};this.setDisplayDate=function(o){this.displayDate=o;this.do_init();this.resize()};this.getDisplayDate=function(){var o=new Date(this.getCurrentYear(),this.getCurrentMonth(),this.getCurrentDay(),0,0,0,0);return o};this.nextMonth=function(){var o=new Date(0,0,1,0,0,0,0);if(this.displayDate.getMonth()==11){o.setFullYear(this.displayDate.getFullYear()+1);o.setMonth(0)}else{o.setFullYear(this.displayDate.getFullYear());o.setMonth(this.displayDate.getMonth()+1)}this.setDisplayDate(o)};this.previousMonth=function(){var o=new Date(0,0,1,0,0,0,0);if(this.displayDate.getMonth()==0){o.setFullYear(this.displayDate.getFullYear()-1);o.setMonth(11)}else{o.setFullYear(this.displayDate.getFullYear());o.setMonth(this.displayDate.getMonth()-1)}this.setDisplayDate(o)};this.buildCalendarHeader=function(){var o=i("<div/>");o.css("width",this.getWidth()+"px");var p=new l(o);return p};this.buildCalendarWeek=function(){var p=i("<div/>");p.css("width",this.getWidth()+"px");var o=new j(p);return o};this.buildCalendarWeekHeader=function(){var o=i("<div/>");o.css("width",this.getWidth()+"px");var p=new n(o);return p};this.buildCalendarHeaderCell=function(){var o=i("<div/>");o.addClass("JFrontierCal-Header-Cell");var p=new g(o);return p};this.buildCalendarWeekHeaderCell=function(){var o=i("<div/>");o.addClass("JFrontierCal-Week-Header-Cell");var p=new b(o);return p};this.buildCalendarDayCell=function(){var p=i("<div/>");p.addClass("JFrontierCal-Day-Cell");var o=new e(p);return o};this.getCurrentYear=function(){return parseInt(this.displayDate.getFullYear())};this.getCurrentMonth=function(){return parseInt(this.displayDate.getMonth())};this.getCurrentDay=function(){return parseInt(this.displayDate.getDate())};this.getNextMonth=function(){var o=new Date(0,0,1,0,0,0,0);if(this.getCurrentMonth()==11){o.setFullYear(this.getCurrentYear()+1);o.setMonth(0)}else{o.setFullYear(this.getCurrentYear());o.setMonth(this.getCurrentMonth()+1)}return o};this.getPreviousMonth=function(){var o=new Date(0,0,1,0,0,0,0);if(this.getCurrentMonth()==0){o.setFullYear(this.getCurrentYear()-1);o.setMonth(11)}else{o.setFullYear(this.getCurrentYear());o.setMonth(this.getCurrentMonth()-1)}return o};this.getDaysCurrentMonth=function(){return parseInt(m.getDaysInMonth(this.displayDate))};this.getDaysPreviousMonth=function(){var o=this.getPreviousMonth();return parseInt(m.getDaysInMonth(o))};this.getDaysNextMonth=function(){var o=this.getNextMonth();return parseInt(m.getDaysInMonth(o))};this.setHtml=function(o){this.jqyObj.html(o)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(o,p){this.jqyObj.css(o,p)};this.getCss=function(o){return this.jqyObj.css(o)};this.setAttr=function(p,o){this.jqyObj.attr(p,o)};this.getAttr=function(o){return this.jqyObj.attr(o)};this.clear=function(o){this.jqyObj.html("");this.calHeaderObj=null;this.weeks=new Array();this.weekHeaders=new Array();this.dayHash=new Hashtable();if(o){this.agendaItems=new Hashtable()}};this.getHeight=function(){return this.jqyObj.height()};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(o){this.jqyObj.width(o);this.resize()};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.addHeader=function(o){if(this.calHeaderObj!=null){var p=this.jqyObj.children("div").first();p.remove();this.calHeaderObj=o;this.jqyObj.prepend(o.jqyObj)}else{this.calHeaderObj=o;this.jqyObj.prepend(o.jqyObj)}};this.addWeek=function(o){this.weeks.push(o);this.jqyObj.append(o.jqyObj)};this.addWeekHeader=function(o){this.weekHeaders.push(o);this.jqyObj.append(o.jqyObj)};this.getWeeks=function(){return this.weeks};this.getWeekHeaders=function(){return this.weekHeaders};this.getNumberWeeks=function(){return this.weeks.length};this.addAgendaItem=function(o){o.setAgendaId(this.agendaId);this.agendaItems.put(this.agendaId,o);this.agendaId++;this.renderSingleAgendaItem(o)};this.getAgendaItemsCount=function(){return this.agendaItems.size()};this.getAgendaItems=function(){return this.agendaItems};this.getAgendaItemById=function(o){return this.agendaItems.get(o)};this.getAgendaItemByDataAttr=function(q,t){if(this.agendaItems!=null&&this.agendaItems.size()>0){var v=null;var u=null;var s=null;var o=new Array();var p=this.agendaItems.values();for(var r=0;r<p.length;r++){v=p[r];u=v.getAgendaData(q);if(u!=null){if(u==t){o.push(v)}}}return o}return null};this.deleteAgendaItemById=function(o){if(this.agendaItems!=null&&this.agendaItems.size()>0){this.agendaItems.remove(o);this.clearDayCellData();this.renderAgendaItems()}};this.deleteAgendaItemByDataAttr=function(w,s){if(this.agendaItems!=null&&this.agendaItems.size()>0){var v=null;var q=null;var u=null;var t=new Array();var p=this.agendaItems.values();for(var o=0;o<p.length;o++){v=p[o];q=v.getAgendaData(w);if(q!=null){if(q==s){t.push(v)}}}if(t.length>0){for(var r=0;r<t.length;r++){this.deleteAgendaItemById(t[r].getAgendaId())}}}};this.appendJqyObj=function(o){this.jqyObj.append(o)};this.shoutOut=function(){alert("You have a calendar object!")};this.clearDayCellData=function(){var r=0;var s=this.getWeeks();if(s!=null&&s.length>0){r=s.length;for(var q=0;q<s.length;q++){var o=s[q].getDays();if(o!=null&&o.length>0){for(var p=0;p<o.length;p++){o[p].clearAgendaDivElements()}}}}};this.setRenderRatio=function(o){if(o!=null&&o<=1&&o>0){this.aspectRatio=o;this.resize()}};this.resize=function(){var o=null;var s=null;var B=null;var M=null;var J=null;var P=this.getWidth();var N=this.getWeeks();if(N!=null&&N.length>0){var E=N[0].getDays();if(E!=null&&E.length>0){o=E[0]}}var v=this.getWeekHeaders();if(v!=null&&v.length>0){var I=v[0].getHeaderCells();if(I!=null&&I.length>0){s=I[0]}}var u=s.jqyObj.outerHeight(true);var y=(o.jqyObj.outerWidth(true)-o.jqyObj.width())*d.dayNames.length;var H=Math.floor(P/d.dayNames.length)-(o.jqyObj.outerWidth(true)-o.jqyObj.width());var t=H+(P-(H*d.dayNames.length))-(o.jqyObj.outerWidth(true)-o.jqyObj.width())-y;var q=parseInt((H-u)*this.aspectRatio);var x=((H*6)+t)+((o.jqyObj.outerWidth(true)-o.jqyObj.width())*d.dayNames.length)+1;this.calHeaderObj.setWidth(x);var Q=this.calHeaderObj.getHeaderCells();if(Q!=null&&Q.length>0){for(var z=0;z<Q.length;z++){if(z==(Q.length-1)){Q[z].setCss("width",t+"px")}else{Q[z].setCss("width",H+"px");M=Q[z]}}}var L=0;var G=this.getWeeks();var r=this.getWeekHeaders();if(G!=null&&G.length>0){L=G.length;for(var K=0;K<G.length;K++){G[K].setWidth(x);r[K].setWidth(x);var F=G[K].getDays();var A=r[K].getHeaderCells();if(F!=null&&F.length>0){for(var D=0;D<F.length;D++){if(D==(F.length-1)){F[D].setCss("width",t+"px");A[D].setCss("width",t+"px");F[D].setCss("height",q+"px");F[D].clearAgendaDivElements()}else{F[D].setCss("width",H+"px");A[D].setCss("width",H+"px");F[D].setCss("height",q+"px");F[D].clearAgendaDivElements();B=F[D];J=A[D]}}}}}var C=parseInt(M.jqyObj.outerHeight(true));var w=parseInt(B.jqyObj.outerHeight(true)*L);var p=parseInt(J.jqyObj.outerHeight(true)*L);var O=C+w+p;this.setCss("height",O+"px");this.renderAgendaItems()};this.getWeekIndex=function(o){if(o.toUpperCase()=="SUN"||o.toUpperCase()=="SUNDAY"){return 0}else{if(o.toUpperCase()=="MON"||o.toUpperCase()=="MONDAY"){return 1}else{if(o.toUpperCase()=="TUE"||o.toUpperCase()=="TUESDAY"){return 2}else{if(o.toUpperCase()=="WED"||o.toUpperCase()=="WEDNESDAY"){return 3}else{if(o.toUpperCase()=="THU"||o.toUpperCase()=="THURSDAY"){return 4}else{if(o.toUpperCase()=="FRI"||o.toUpperCase()=="FRIDAY"){return 5}else{if(o.toUpperCase()=="SAT"||o.toUpperCase()=="SATURDAY"){return 6}else{return -1}}}}}}}}}d.dayNames=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");d.showMoreAgendaModal=function(o,q,r){if(o==null||q==null||r==null){alert("Can't open dialog. One ore more of Calendar/Date/agendaItems parameters are null.")}var w=o.jqyObj.attr("id")+"-more-agenda-modal";var v=((i("#"+w).length==0)?false:true);if(v){i("#"+w).dialog("destroy");i("#"+w).remove()}var u=i("<div/>");u.attr("id",w);u.attr("title","Agenda Items for "+q.toDateString());u.dialog({autoOpen:false,height:350,width:400,modal:true,buttons:{Ok:function(){i(this).dialog("close")}},open:function(x,y){},close:function(){}});var t=null;var p=null;u.append("<br>");for(var s=0;s<r.length;s++){t=r[s];p=i("<div/>");p.addClass("JFrontierCal-Modal-Agenda-Item");if(t.getBackgroundColor()!=null){p.css("background-color",t.getBackgroundColor())}if(t.getForegroundColor()!=null){p.css("color",t.getForegroundColor())}p.css("width","100%");p.css("height","30px");p.css("margin-bottom","2px");p.css("-moz-border-radius-bottomleft","3px");p.css("-moz-border-radius-topleft","3px");p.css("-webkit-border-bottom-left-radius","3px");p.css("-webkit-border-top-left-radius","3px");p.css("-moz-border-radius-topright","3px");p.css("-moz-border-radius-bottomright","3px");p.css("-webkit-border-top-right-radius","3px");p.css("-webkit-border-bottom-right-radius","3px");p.append(t.getTitle()+"<br>");p.append("From "+m.getAgendaDisplayTime(t.getStartDate())+" on "+t.getStartDate().toDateString()+" To "+m.getAgendaDisplayTime(t.getEndDate())+" "+t.getEndDate().toDateString()+"<br>");if(o.clickEvent_agendaCell!=null){p.bind("click",{agendaId:t.getAgendaId(),callBack:o.clickEvent_agendaCell,dialog:u},o.clickAgendaFromCalendarMoreModalDialog)}p.hover(function(){i(this).css("cursor","pointer")},function(){i(this).css("cursor","auto")});u.append(p)}u.dialog("open")};function m(){}m.getDaysInMonth=function(o){var q=new Date(o.getFullYear(),o.getMonth(),1,0,0,0,0);var s=q.getMonth();var p=s;var r=0;while(p==s){r++;q.setDate(q.getDate()+1);s=q.getMonth()}return r};m.isDateBetween=function(q,p,o){if(q==null||p==null||o==null){return false}if(m.daysDifferenceDirection(q,p)<=0&&m.daysDifferenceDirection(q,o)>=0){return true}return false};m.daysDifference=function(w,u){var p=1000*60*60*24;var s=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0);var q=new Date(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0);var t=s.getTime();var o=q.getTime();var v=Math.abs(o-t);var r=v/p;return r};m.daysDifferenceDirection=function(w,u){var p=1000*60*60*24;var s=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0);var q=new Date(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0);var t=s.getTime();var o=q.getTime();var v=o-t;var r=v/p;return r};m.secondsDifferenceDirection=function(t,s){var p=1000;var r=t.getTime();var q=s.getTime();var o=q-r;return Math.round(o/p)};m.getNextDay=function(p){var q=p.getDay();var t=p.getDate();var r=p.getMonth();var s=p.getFullYear();var o=m.getDaysInMonth(p);if(t==o){if(s==11){return new Date(s+1,r+1,1,0,0,0,0)}else{return new Date(s,r+1,1,0,0,0,0)}}else{return new Date(s,r,t+1,0,0,0,0)}};m.getPreviousMonth=function(o){var p=new Date(0,0,1,0,0,0,0);if(p.getMonth()==0){p.setFullYear(o.getFullYear()-1);p.setMonth(11)}else{p.setFullYear(o.getFullYear());p.setMonth(o.getMonth()-1)}return p};m.getFirstDayInSameWeek=function(s){var o=s.getDay();var r=s.getDate();var t=s.getMonth();var x=s.getFullYear();var p=m.getDaysInMonth(s);if(o==0){return new Date(x,t,r,0,0,0,0)}var v=r-o;if(v<1){var w=m.getPreviousMonth(s);var q=m.getDaysInMonth(w);var u=q+v;if(t==0){return new Date(x-1,11,u,0,0,0,0)}else{return new Date(x,t-1,u,0,0,0,0)}}else{return new Date(x,t,v,0,0,0,0)}};m.getLastDayInSameWeek=function(q){var r=q.getDay();var v=q.getDate();var t=q.getMonth();var u=q.getFullYear();var p=m.getDaysInMonth(q);if(r==6){return new Date(u,t,v,0,0,0,0)}var s=6-r;if((v+s)>p){var o=s-(p-v);if(u==11){return new Date(u+1,t+1,o,0,0,0,0)}else{return new Date(u,t+1,o,0,0,0,0)}}else{return new Date(u,t,v+s,0,0,0,0)}};m.getFirstDayNextWeek=function(r){var o=r.getDay();var q=r.getDate();var u=r.getMonth();var w=r.getFullYear();var p=m.getDaysInMonth(r);if(o==0){return new Date(w,u,q,0,0,0,0)}var t=6-o;var s=q+t+1;if(s>p){var v=t-(p-q)+1;if(w==11){return new Date(w+1,u+1,v,0,0,0,0)}else{return new Date(w,u+1,v,0,0,0,0)}}else{return new Date(w,u,s,0,0,0,0)}};m.getAgendaDisplayTime=function(q){if(q==null){return""}var s=":";var r=q.getHours();var o=q.getMinutes();var p="am";if(o==0){o="";s=""}else{if(o<10){o="0"+o}}if(r==0){r=12}else{if(r>12){r=r-12;p="pm"}}return r+s+o+p};function a(){}a.log=function(o){};i.fn.jFrontierCal=function(o,q){var p=i(this).attr("id");var r;var s={foo:"bar",date:new Date(),dayClickCallback:function(t){alert("Day cell clicked! Override this handler to process click events on day cells.")},agendaClickCallback:function(t){alert("Agenda item clicked! Override this handler to process click events on agenda items.");t.stopPropagation()}};if(i.isPlainObject(o)){var q=o;r=i.extend(s,q);k[p]=r}else{r=i.extend(s,q);k[p]=r}return this.each(function(){var v=i(this);if(v.data("plugin")){return}var u=k[p];var t=new c(v,u.dayClickCallback,u.agendaClickCallback);t.init();v.data("plugin",t)})};var c=function(r,o,t){var q=this;var v=r.attr("id");var p=o;var w=t;this.init=function(){var y=new Date();var x=new d();x.initialize(r,y,p,w);f.put(v,x);i(window).wresize(this.doResizeAll);this.doResizeAll();this.doResizeAll();return x};this.addAgendaItem=function(F,D,y,B,A,E){if(F!=null&&D!=null&&y!=null&&B!=null){if(m.secondsDifferenceDirection(y,B)<0){alert("Sorry, you can't create an event that ends before it starts");return}F=u(F);var x=new Hashtable();if(A!=null){for(var G in A){x.put(G,A[G])}}var C=new h(D,y,B,x);if(E!=null){if(E.backgroundColor!=null){C.setBackgroundColor(E.backgroundColor)}if(E.foregroundColor!=null){C.setForegroundColor(E.foregroundColor)}}var z=f.get(F);z.addAgendaItem(C)}};this.getAllAgendaItems=function(C){var y=new Array();if(C!=null){C=u(C);var x=f.get(C);var B=x.getAgendaItems();if(B!=null&&B.size()>0){var A=null;var z=B.values();for(var D=0;D<z.length;D++){var E=z[D];A=s(E);y.push(A)}}}return y};this.getAgendaItemById=function(z,A){if(z!=null&&A!=null){z=u(z);var x=f.get(z);var y=x.getAgendaItemById(parseInt(A));if(y==null){return null}return s(y)}};this.getAgendaItemByDataAttr=function(A,z,B){if(A!=null&&z!=null&&B!=null){A=u(A);var x=f.get(A);var y=x.getAgendaItemByDataAttr(z,B);return y}};this.deleteAgendaItemById=function(y,z){if(y!=null&&z!=null){y=u(y);var x=f.get(y);x.deleteAgendaItemById(z)}};this.deleteAgendaItemByDataAttr=function(z,y,A){if(z!=null&&y!=null&&A!=null){z=u(z);var x=f.get(z);x.deleteAgendaItemByDataAttr(y,A)}};this.getAgendaItemsCount=function(y){if(y!=null){y=u(y);var x=f.get(y);return x.getAgendaItemsCount()}};this.showPreviousMonth=function(y){if(y!=null){y=u(y);var x=f.get(y);x.previousMonth()}};this.showNextMonth=function(y){if(y!=null){y=u(y);var x=f.get(y);x.nextMonth()}};this.showMonth=function(z,A,D){if(z!=null&&A!=null&&D!=null&&A.length==4&&(D.length==1||D.length==2)){z=u(z);D=D.replace(/^[0]+/g,"");var C=parseInt(A);var B=parseInt(D);var y=new Date(C,B,1,0,0,0,0);var x=f.get(z);x.setDisplayDate(y)}};this.getCurrentDate=function(y){if(y!=null){y=u(y);var x=f.get(y);return x.getDisplayDate()}};this.doResizeAll=function(){if(f!=null&&f.size()>0){var y=f.values();for(var x=0;x<y.length;x++){y[x].resize()}}};this.doResize=function(y){if(f!=null&&f.size()>0&&y!=null){y=u(y);var x=f.get(y);x.resize()}};this.setAspectRatio=function(y,z){if(y!=null&&z!=null){if(z>1||z<=0){alert("Ratio is out of range. Ratio must be less than or equal to 1, and greater than 0.")}else{y=u(y);var x=f.get(y);x.setRenderRatio(z)}}};function u(x){if(x!=null){if(x.startsWith("#")){return x.substring(1,x.length)}}return x}function s(C){if(C==null){return null}var y=null;var F=C.getAgendaDataHash();if(F!=null&&F.size()>0){y=new Object();var E=null;var B=null;var A=F.keys();for(var z=0;z<A.length;z++){E=A[z];B=F.get(E);y[E]=B}}var D=new Object();D.backgroundColor=C.getBackgroundColor();D.foregroundColor=C.getForegroundColor();var x={agendaId:C.getAgendaId(),title:C.getTitle(),startDate:C.getStartDate(),endDate:C.getEndDate(),data:y,displayProp:D};return x}}})(jQuery);(function(a){a.fn.wresize=function(c){version="1.1";wresize={fired:false,width:0};function b(){if(a.browser.msie){if(!wresize.fired){wresize.fired=true}else{var e=parseInt(a.browser.version,10);wresize.fired=false;if(e<7){return false}else{if(e==7){var f=a(window).width();if(f!=wresize.width){wresize.width=f;return false}}}}}return true}function d(f){if(b()){return c.apply(this,[f])}}this.each(function(){if(this==window){a(this).resize(d)}else{a(this).resize(c)}});return this}})(jQuery);