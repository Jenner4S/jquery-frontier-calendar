/*! jquery-frontier-calendar 2016-02-25 */
!function($){function CalendarAgendaItem(a,b,c,d,e){this.id=0,this.titleValue=a,this.startDt=b,this.endDt=c,this.allDayEvent=d,this.backgroundColor=null,this.foregroundColor=null,this.agendaData=e,this.isAllDay=function(){return this.allDayEvent},this.setAllDay=function(a){this.allDayEvent=a},this.setBackgroundColor=function(a){this.backgroundColor=a},this.setForegroundColor=function(a){this.foregroundColor=a},this.getBackgroundColor=function(){return this.backgroundColor},this.getForegroundColor=function(){return this.foregroundColor},this.setAgendaId=function(a){this.id=a},this.getAgendaId=function(){return this.id},this.getStartDate=function(){return this.startDt},this.getEndDate=function(){return this.endDt},this.setStartDate=function(a){this.startDt=a},this.setEndDate=function(a){this.endDt=a},this.getTitle=function(){return this.titleValue},this.addAgendaData=function(a,b){this.agendaData.put(a,b)},this.getAgendaData=function(a){return this.agendaData.get(a)},this.getAgendaDataHash=function(){return this.agendaData},this.toString=function(){var a="Title: "+this.titleValue+"\n";if(a+="Start Date: "+this.startDt+"\n",a+="End Date: "+this.endDt+"\n",null!=this.agendaData&&this.agendaData.size()>0)for(var b=this.agendaData.keys(),c=0;c<b.length;c++){var d=b[c],e=this.getAgendaData(d);a+=d+": "+e+"\n"}return a}}function CalendarDayCell(a){this.jqyObj=a,this.date=null,this.agendaDivArray=new Array,this.jqyMoreDiv=null,this.addClass=function(a){this.jqyObj.addClass(a)},this.removeClass=function(a){null!=a&&""!=a?this.jqyObj.removeClass(a):this.jqyObj.removeClass()},this.addMoreDiv=function(a){null==this.jqyMoreDiv?(this.jqyMoreDiv=a,this.appendHtml(a)):(this.jqyMoreDiv.remove(),this.jqyMoreDiv=a,this.appendHtml(a))},this.hasMoreDiv=function(){return null!=this.jqyMoreDiv},this.addAgendaDivElement=function(a,b){this.agendaDivArray.push(b)},this.clearAgendaDivElements=function(){this.clearHtml(),this.jqyMoreDiv=null,this.agendaDivArray=new Array},this.getNextAgendaYstartY=function(a,b,c){var d=a,e=this.agendaDivArray,f=this.getY()+this.getHeight()-(b+1)-(c+1);if(null!=e&&e.length>0){e.sort(this.sortDivByY);for(var g=0,h=0,i=0;i<e.length;i++)g=parseInt(e[i].css("top").replace("px","")),h=g+parseInt(e[i].css("height").replace("px",""))+1,g+2-d>b+1||d>h||(d=h)}return d>f?-1:parseInt(d)},this.sortDivByY=function(a,b){var c=parseInt(a.css("top").replace("px","")),d=parseInt(b.css("top").replace("px",""));return d>c?-1:c>d?1:0},this.setDate=function(a){this.date=a},this.getDate=function(){return this.date},this.getHeight=function(){return this.jqyObj.height()},this.setHeight=function(a){this.jqyObj.height(a)},this.getWidth=function(){return this.jqyObj.width()},this.setWidth=function(a){this.jqyObj.width(a)},this.getInnerWidth=function(){return this.jqyObj.innerWidth()},this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()},this.getX=function(){return this.jqyObj.position().left},this.getY=function(){return this.jqyObj.position().top},this.setHtml=function(a){this.jqyObj.html(a)},this.appendHtml=function(a){this.jqyObj.append(a)},this.clearHtml=function(){this.setHtml("")},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.addClickHandler=function(a){this.jqyObj.bind("click",{calDayDate:this.date},a)}}function CalendarHeaderCell(a){this.jqyObj=a,this.addClass=function(a){this.jqyObj.addClass(a)},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.getX=function(){return this.jqyObj.position().left},this.getY=function(){return this.jqyObj.position().top},this.getHeight=function(){return this.jqyObj.height()},this.setHeight=function(a){this.jqyObj.height(a)},this.getWidth=function(){return this.jqyObj.width()},this.setWidth=function(a){this.jqyObj.width(a)},this.getInnerWidth=function(){return this.jqyObj.innerWidth()},this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()}}function CalendarWeekHeaderCell(a){this.jqyObj=a,this.date=null,this.addClass=function(a){this.jqyObj.addClass(a)},this.setDate=function(a){this.date=a},this.getDate=function(){return this.date},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.getX=function(){return this.jqyObj.position().left},this.getY=function(){return this.jqyObj.position().top},this.getHeight=function(){return this.jqyObj.height()},this.setHeight=function(a){this.jqyObj.height(a)},this.getWidth=function(){return this.jqyObj.width()},this.setWidth=function(a){this.jqyObj.width(a)},this.getInnerWidth=function(){return this.jqyObj.innerWidth()},this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()},this.addClickHandler=function(a){this.jqyObj.bind("click",{calDayDate:this.date},a)}}function CalendarHeader(a){this.jqyObj=a,this.headerCells=new Array,this.appendCalendarHeaderCell=function(a){this.headerCells.push(a),this.jqyObj.append(a.jqyObj)},this.getHeaderCells=function(){return this.headerCells},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.setWidth=function(a){this.jqyObj.width(a)}}function CalendarWeekHeader(a){this.jqyObj=a,this.weekHeaderCells=new Array,this.appendCalendarWeekHeaderCell=function(a){this.weekHeaderCells.push(a),this.jqyObj.append(a.jqyObj)},this.getHeaderCells=function(){return this.weekHeaderCells},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.setWidth=function(a){this.jqyObj.width(a)}}function CalendarWeek(a){this.jqyObj=a,this.days=new Array,this.appendCalendarDayCell=function(a){this.days.push(a),this.jqyObj.append(a.jqyObj)},this.getDays=function(){return this.days},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.setWidth=function(a){this.jqyObj.width(a)},this.addClass=function(a){this.jqyObj.addClass(a)}}function Calendar(){this.jqyObj=null,this.calHeaderObj=null,this.weeks=new Array,this.weekHeaders=new Array,this.displayDate=new Date,this.agendaItems=new Hashtable,this.dragAndDropEnabled=!0,this.dayHash=new Hashtable,this.clickEvent_dayCell=null,this.clickEvent_agendaCell=null,this.dropEvent_agendaCell=null,this.mouseOverEvent_agendaCell=null,this.callBack_agendaTooltip=null,this.dragStart_agendaCell=null,this.dragStop_agendaCell=null,this.agendaId=1,this.cellBorderWidth=1,this.dayCellHeaderCellHeight=17,this.agendaItemHeight=15,this.aspectRatio=1,this.initialize=function(a,b,c,d,e,f,g,h,i,j){this.jqyObj=a,this.displayDate=b,this.clickEvent_dayCell=c,this.clickEvent_agendaCell=d,this.dropEvent_agendaCell=e,this.dragAndDropEnabled=f,this.mouseOverEvent_agendaCell=g,this.callBack_agendaTooltip=h,this.dragStart_agendaCell=i,this.dragStop_agendaCell=j,this.do_init()},this.do_init=function(){this.clear(!1);for(var a,b=this.buildCalendarHeader(),c=0;c<Calendar.dayNames.length;c++)a=this.buildCalendarHeaderCell(),a.setHtml("&nbsp;"+Calendar.dayNames[c]),b.appendCalendarHeaderCell(a),6==c&&a.addClass("JFrontierCal-Header-Cell-Last");this.addHeader(b);var d=new Date,e=this.getCurrentYear(),f=this.getCurrentMonth(),g=d.getDate(),h=this.getDaysCurrentMonth(),i=this.getDaysPreviousMonth(),j=(this.getDaysNextMonth(),new Date(this.getCurrentYear(),this.getCurrentMonth(),1,0,0,0,0)),k=new Date(this.getCurrentYear(),this.getCurrentMonth(),h,0,0,0,0),l=j.getDay(),m=k.getDay(),n=d.getFullYear()==e&&d.getMonth()==f,o=h+l;m>0&&(o+=Calendar.dayNames.length-m-1);var p,q,r,s,t=Math.ceil(o/Calendar.dayNames.length),u=1,v=null,w=i-l+1;q=this.buildCalendarWeek(),s=this.buildCalendarWeekHeader();for(var c=0;c<Calendar.dayNames.length;c++)p=this.buildCalendarDayCell(),r=this.buildCalendarWeekHeaderCell(),l>c?(v=new Date(e,f-1,w,0,0,0,0),p.setDate(v),r.setDate(v),r.setHtml(w+"&nbsp;"),p.addClass("JFrontierCal-PrevMonth-Day-Cell"),r.addClass("JFrontierCal-PrevMonth-Week-Header-Cell"),w+=1):(v=new Date(e,f,u,0,0,0,0),p.setDate(v),r.setDate(v),r.setHtml(u+"&nbsp;"),n&&u==g&&(p.addClass("JFrontierCal-Day-Cell-Today"),r.setHtml(u+"&nbsp;")),u+=1),6==c&&(p.addClass("JFrontierCal-Day-Cell-Last"),r.addClass("JFrontierCal-Week-Header-Cell-Last")),null!=this.clickEvent_dayCell&&(p.addClickHandler(this.clickEvent_dayCell),r.addClickHandler(this.clickEvent_dayCell)),p.jqyObj.data("dayDate",v),this.dragAndDropEnabled&&(p.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),p.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),s.appendCalendarWeekHeaderCell(r),q.appendCalendarDayCell(p),this.dayHash.put(p.getDate().getFullYear()+""+(p.getDate().getMonth()+"")+(p.getDate().getDate()+""),p);this.addWeekHeader(s),this.addWeek(q);for(var x=2;t>x;x++){q=this.buildCalendarWeek(),s=this.buildCalendarWeekHeader();for(var c=0;c<Calendar.dayNames.length;c++)p=this.buildCalendarDayCell(),r=this.buildCalendarWeekHeaderCell(),v=new Date(e,f,u,0,0,0,0),p.setDate(v),r.setDate(v),r.setHtml(u+"&nbsp;"),null!=this.clickEvent_dayCell&&(p.addClickHandler(this.clickEvent_dayCell),r.addClickHandler(this.clickEvent_dayCell)),p.jqyObj.data("dayDate",v),this.dragAndDropEnabled&&(p.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),p.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),6==c&&(p.addClass("JFrontierCal-Day-Cell-Last"),r.addClass("JFrontierCal-Week-Header-Cell-Last")),n&&u==g&&(p.addClass("JFrontierCal-Day-Cell-Today"),r.setHtml(u+"&nbsp;")),s.appendCalendarWeekHeaderCell(r),q.appendCalendarDayCell(p),this.dayHash.put(p.getDate().getFullYear()+""+(p.getDate().getMonth()+"")+(p.getDate().getDate()+""),p),u+=1;this.addWeekHeader(s),this.addWeek(q)}var y=1;q=this.buildCalendarWeek(),s=this.buildCalendarWeekHeader();for(var c=0;c<Calendar.dayNames.length;c++)p=this.buildCalendarDayCell(),r=this.buildCalendarWeekHeaderCell(),h>=u?(v=new Date(e,f,u,0,0,0,0),p.setDate(v),r.setDate(v),r.setHtml(u+"&nbsp;")):(v=new Date(e,f+1,y,0,0,0,0),p.setDate(v),r.setDate(v),r.setHtml(y+"&nbsp;"),p.addClass("JFrontierCal-NextMonth-Day-Cell"),r.addClass("JFrontierCal-NextMonth-Week-Header-Cell"),y+=1),6==c&&h>=u?(p.addClass("JFrontierCal-Day-Cell-Last"),r.addClass("JFrontierCal-Week-Header-Cell-Last")):6==c&&u>h&&(p.addClass("JFrontierCal-NextMonth-Day-Cell-Last"),r.addClass("JFrontierCal-NextMonth-Week-Header-Cell-Last")),n&&u==g&&(p.addClass("JFrontierCal-Day-Cell-Today"),r.setHtml(u+"&nbsp;")),u+=1,null!=this.clickEvent_dayCell&&(p.addClickHandler(this.clickEvent_dayCell),r.addClickHandler(this.clickEvent_dayCell)),p.jqyObj.data("dayDate",v),this.dragAndDropEnabled&&(p.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),p.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),s.appendCalendarWeekHeaderCell(r),q.appendCalendarDayCell(p),this.dayHash.put(p.getDate().getFullYear()+""+(p.getDate().getMonth()+"")+(p.getDate().getDate()+""),p);this.addWeekHeader(s),this.addWeek(q);var z=parseInt(a.jqyObj.outerHeight(!0)),A=parseInt(p.jqyObj.outerHeight(!0)*t),B=parseInt(r.jqyObj.outerHeight(!0)),C=A+z+B;this.setCss("height",C+"px"),this.jqyObj.addClass("JFrontierCal"),this.renderAgendaItems()},this.getAgendaItemsForDay=function(a){if(null!=this.agendaItems&&0!=this.agendaItems.size()){for(var b=this.agendaItems.values(),c=null,d=null,e=new Array,f=0;f<this.agendaItems.size();f++){var g=b[f];c=g.getStartDate(),d=g.getEndDate(),DateUtil.isDateBetween(a,c,d)&&e.push(g)}return e}},this.renderAgendaItems=function(){if(null!=this.agendaItems&&0!=this.agendaItems.size()){var a=this.agendaItems.values();a.sort(Calendar.sortAgendaItemsByStartDate);for(var b=0;b<this.agendaItems.size();b++){var c=a[b];this.renderSingleAgendaItem(c)}}},this.renderSingleAgendaItem=function(a){var b=new Date;if(LogUtil.log("Calendar.renderSingleAgendaItem() called."),null!=a&&null!=this.weeks&&0!=this.weeks.length){var c,d,e=null,f=(a.getAgendaId(),a.getStartDate()),g=a.getEndDate();if(null!=f&&null!=g){var h=null,i=this.weeks[0].getDays();null!=i&&i.length>0&&(h=i[0]);var j=null,k=this.weeks[this.weeks.length-1].getDays();if(null!=k&&k.length>0&&(j=k[k.length-1]),null!=h&&null!=j){var l=h.getDate(),m=j.getDate();if(!(DateUtil.daysDifferenceDirection(l,g)<0||DateUtil.daysDifferenceDirection(m,f)>0)){var n=null,o=null;n=DateUtil.daysDifferenceDirection(l,f)<0?l:0==DateUtil.daysDifferenceDirection(l,f)?l:f,o=DateUtil.daysDifferenceDirection(m,g)>0?m:0==DateUtil.daysDifferenceDirection(m,g)?m:g;var p=n.getDay();o.getDay();if(DateUtil.daysDifference(n,o)+p>6){e=a.isAllDay()?a.getTitle():DateUtil.getAgendaDisplayTime(a.getStartDate())+" "+a.getTitle();var q=DateUtil.getLastDayInSameWeek(n);for(d=0==DateUtil.daysDifferenceDirection(f,n),c=0==DateUtil.daysDifferenceDirection(g,q),this.renderAgendaDivElement(a,e,this.getCalendarDayObjByDate(n),this.getCalendarDayObjByDate(q),d,c),this.renderPrintableAgendaDivElement(a,e,this.getCalendarDayObjByDate(n),this.getCalendarDayObjByDate(q),d,c),this.renderScreenAgendaDivElement(a,e,this.getCalendarDayObjByDate(n),this.getCalendarDayObjByDate(q),d,c),e=a.getTitle();DateUtil.daysDifferenceDirection(o,q)<0;){var r=DateUtil.getFirstDayNextWeek(q);q=DateUtil.getLastDayInSameWeek(r),DateUtil.daysDifferenceDirection(o,q)<0?(this.renderAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(q),!1,!1),this.renderPrintableAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(q),d,c),this.renderScreenAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(q),d,c)):(d=0==DateUtil.daysDifferenceDirection(f,r),c=0==DateUtil.daysDifferenceDirection(g,o),this.renderAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(o),d,c),this.renderPrintableAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(o),d,c),this.renderScreenAgendaDivElement(a,e,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(o),d,c))}}else{var s=this.getCalendarDayObjByDate(n),t=this.getCalendarDayObjByDate(o);e=a.isAllDay()?a.getTitle():DateUtil.getAgendaDisplayTime(a.getStartDate())+" "+a.getTitle(),d=0==DateUtil.daysDifferenceDirection(f,n),c=0==DateUtil.daysDifferenceDirection(g,o),this.renderAgendaDivElement(a,e,s,t,d,c),this.renderPrintableAgendaDivElement(a,e,s,t,d,c),this.renderScreenAgendaDivElement(a,e,s,t,d,c)}var u=new Date;LogUtil.log("Calendar.renderSingleAgendaItem() end. Elapsed time in ms = "+Math.abs(u-b))}}}}},this.renderAgendaDivElement=function(a,b,c,d,e,f){if(null!=b&&null!=c&&null!=d){var g=c.getX()+1,h=d.getX()+d.getWidth()-1,i=h-g,j=this.agendaItemHeight,k=j,l=this.getNextAgendaYPosition(c,d,j,k);if(l>0){var m=$("<div/>");if(m.data("agendaId",a.getAgendaId()),this.dragAndDropEnabled&&(m.bind("drag",function(a,b){}),m.bind("dragstart",{agendaDivElement:m,agendaId:a.getAgendaId(),agendaItem:Calendar.buildUserAgendaObject(a),callBack:this.dragStart_agendaCell},function(a,b){var c=a.data.callBack;null!=c&&c(a,a.data.agendaDivElement,a.data.agendaItem)}),m.bind("dragstop",{agendaDivElement:m,agendaId:a.getAgendaId(),agendaItem:Calendar.buildUserAgendaObject(a),callBack:this.dragStop_agendaCell},function(a,b){var c=a.data.callBack;null!=c&&c(a,a.data.agendaDivElement,a.data.agendaItem)}),m.draggable("enable"),m.data("agendaDivElement",m),m.data("agendaId",a.getAgendaId()),m.data("agendaItem",Calendar.buildUserAgendaObject(a)),m.data("revertCallBack",this.callBack_agendaTooltip),m.draggable({revert:function(a,b){var c=$(this).data("revertCallBack"),d=$(this).data("agendaDivElement"),e=$(this).data("agendaItem");return null!=c&&c(d,e),!0},scroll:!0})),m.addClass("JFrontierCal-Agenda-Item"),null!=a.getBackgroundColor()&&m.css("background-color",a.getBackgroundColor()),null!=a.getForegroundColor()&&m.css("color",a.getForegroundColor()),m.css("position","absolute"),m.css("left",g+"px"),m.css("top",l+"px"),m.css("width",i+"px"),m.css("white-space","nowrap"),e)m.css("-moz-border-radius-bottomleft","3px"),m.css("-moz-border-radius-topleft","3px"),m.css("-webkit-border-bottom-left-radius","3px"),m.css("-webkit-border-top-left-radius","3px");else{var n=$("<span/>");n.css("float","left"),n.addClass("ui-icon ui-icon-circle-triangle-w"),m.append(n)}var o=$("<span/>");if(o.css("float","left"),o.html(b),m.append(o),f)m.css("-moz-border-radius-topright","3px"),m.css("-moz-border-radius-bottomright","3px"),m.css("-webkit-border-top-right-radius","3px"),m.css("-webkit-border-bottom-right-radius","3px");else{var n=$("<span/>");n.css("float","right"),n.addClass("ui-icon ui-icon-circle-triangle-e"),m.append(n)}null!=this.clickEvent_agendaCell&&m.bind("click",{agendaId:a.getAgendaId(),callBack:this.clickEvent_agendaCell},this.clickAgendaFromCalendarHandler),null!=this.mouseOverEvent_agendaCell&&m.bind("mouseover",{agendaId:a.getAgendaId(),callBack:this.mouseOverEvent_agendaCell},this.clickAgendaFromCalendarHandler),m.hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")}),this.callBack_agendaTooltip&&this.callBack_agendaTooltip(m,Calendar.buildUserAgendaObject(a)),this.addAgendaDivToDays(c,d,m,a.getAgendaId()),c.appendHtml(m)}else this.addMoreDivToDays(c,d,k)}},this.renderScreenAgendaDivElement=function(a,b,c,d,e,f){if(null!=b&&null!=c&&null!=d){var g=c.getX()+1,h=d.getX()+d.getWidth()-1,i=h-g,j=this.agendaItemHeight,k=j,l=this.getNextAgendaYPosition(c,d,j,k),m=$("<div/>");if(m.data("agendaId",a.getAgendaId()),this.dragAndDropEnabled&&(m.bind("drag",function(a,b){}),m.bind("dragstart",{agendaDivElement:m,agendaId:a.getAgendaId(),agendaItem:Calendar.buildUserAgendaObject(a),callBack:this.dragStart_agendaCell},function(a,b){var c=a.data.callBack;null!=c&&c(a,a.data.agendaDivElement,a.data.agendaItem)}),m.bind("dragstop",{agendaDivElement:m,agendaId:a.getAgendaId(),agendaItem:Calendar.buildUserAgendaObject(a),callBack:this.dragStop_agendaCell},function(a,b){var c=a.data.callBack;null!=c&&c(a,a.data.agendaDivElement,a.data.agendaItem)}),m.draggable("enable"),m.data("agendaDivElement",m),m.data("agendaId",a.getAgendaId()),m.data("agendaItem",Calendar.buildUserAgendaObject(a)),m.data("revertCallBack",this.callBack_agendaTooltip),m.draggable({revert:function(a,b){var c=$(this).data("revertCallBack"),d=$(this).data("agendaDivElement"),e=$(this).data("agendaItem");return null!=c&&c(d,e),!0},scroll:!0})),m.addClass("JFrontierCal-Screen-Agenda-Item"),null!=a.getBackgroundColor()&&m.css("background-color",a.getBackgroundColor()),null!=a.getForegroundColor()&&m.css("color",a.getForegroundColor()),m.css("position","absolute"),m.css("left",g+"px"),m.css("top",l+"px"),m.css("width",i+"px"),m.css("white-space","nowrap"),e)m.css("-moz-border-radius-bottomleft","3px"),m.css("-moz-border-radius-topleft","3px"),m.css("-webkit-border-bottom-left-radius","3px"),m.css("-webkit-border-top-left-radius","3px");else{var n=$("<span/>");n.css("float","left"),n.addClass("ui-icon ui-icon-circle-triangle-w"),m.append(n)}var o=$("<span/>");if(o.css("float","left"),o.html(b),m.append(o),f)m.css("-moz-border-radius-topright","3px"),m.css("-moz-border-radius-bottomright","3px"),m.css("-webkit-border-top-right-radius","3px"),m.css("-webkit-border-bottom-right-radius","3px");else{var n=$("<span/>");n.css("float","right"),n.addClass("ui-icon ui-icon-circle-triangle-e"),m.append(n)}null!=this.clickEvent_agendaCell&&m.bind("click",{agendaId:a.getAgendaId(),callBack:this.clickEvent_agendaCell},this.clickAgendaFromCalendarHandler),null!=this.mouseOverEvent_agendaCell&&m.bind("mouseover",{agendaId:a.getAgendaId(),callBack:this.mouseOverEvent_agendaCell},this.clickAgendaFromCalendarHandler),m.hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")}),this.callBack_agendaTooltip&&this.callBack_agendaTooltip(m,Calendar.buildUserAgendaObject(a)),c.appendHtml(m)}},this.renderPrintableAgendaDivElement=function(a,b,c,d,e,f){if(null!=b&&null!=c&&null!=d){var g=c.getX()+1,h=d.getX()+d.getWidth()-1,i=h-g,j=this.agendaItemHeight,k=j,l=this.getNextAgendaYPosition(c,d,j,k),m=$("<div/>");if(m.addClass("JFrontierCal-Printable-Agenda-Item"),null!=a.getBackgroundColor()&&m.css("background-color",a.getBackgroundColor()),null!=a.getForegroundColor()&&m.css("color",a.getForegroundColor()),m.css("position","absolute"),m.css("left",g+"px"),m.css("top",l+"px"),m.css("width",i+"px"),m.css("white-space","nowrap"),e)m.css("-moz-border-radius-bottomleft","3px"),m.css("-moz-border-radius-topleft","3px"),m.css("-webkit-border-bottom-left-radius","3px"),m.css("-webkit-border-top-left-radius","3px");else{var n=$("<span/>");n.css("float","left"),n.addClass("ui-icon ui-icon-circle-triangle-w"),m.append(n)}var o=$("<span/>");if(o.css("float","left"),o.html(b),m.append(o),f)m.css("-moz-border-radius-topright","3px"),m.css("-moz-border-radius-bottomright","3px"),m.css("-webkit-border-top-right-radius","3px"),m.css("-webkit-border-bottom-right-radius","3px");else{var n=$("<span/>");n.css("float","right"),n.addClass("ui-icon ui-icon-circle-triangle-e"),m.append(n)}c.appendHtml(m)}},this.clickAgendaFromCalendarHandler=function(a){a.stopPropagation();var b=a.data.callBack;null!=b&&b(a)},this.mouseOverAgendaFromCalendarHandler=function(a){var b=a.data.callBack;null!=b&&b(a)},this.clickAgendaFromCalendarMoreModalDialogHandler=function(a){var b=a.data.dialog;null!=b&&b.dialog("close");var c=a.data.callBack;null!=c&&c(a),a.stopPropagation()},this.agendaDropHandler=function(a,b){var c=a.data.cal;null==c&&alert("Drop Error: Calendar object is null.");var d=b.draggable,e=parseInt(d.data("agendaId"));null==e&&alert("Drop Error: Agenda id is null.");var f=c.getAgendaItemById(e);null==f&&alert("Drop Error: Agenda item object is null.");var g=$(this).data("dayDate");d.fadeOut(function(){d.draggable("destroy"),c.deleteAgendaItemById(e);var b=f.getStartDate(),h=f.getEndDate(),i=DateUtil.daysDifferenceDirection(b,g),j=DateUtil.addDays(b,i),k=DateUtil.addDays(h,i);f.setStartDate(j),f.setEndDate(k),c.addAgendaItem(f),a.data.agendaId=e,a.data.calDayDate=g,null!=c.dropEvent_agendaCell&&c.dropEvent_agendaCell(a)}),a.stopPropagation()},this.addMoreDivToDays=function(a,b,c){if(null!=a&&null!=b&&null!=c){var d=a.getDate(),e=b.getDate(),f=DateUtil.getNextDay(d),g=$("<div/>");g.addClass("JFrontierCal-Agenda-More-Link"),g.css("position","absolute");var h=this.getAgendaItemsForDay(d);g.html("+ more ("+h.length+")"),g.bind("click",{cal:this,calDayDate:d,agendaItems:h},function(a){a.stopPropagation(),Calendar.showMoreAgendaModal(a.data.cal,a.data.calDayDate,a.data.agendaItems)}),g.hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")});var i=a.getY()+a.getHeight()-c-1,j=a.getX(),k=a.getWidth();for(g.css("top",i+"px"),g.css("left",j+"px"),g.css("width",k+"px"),g.css("height",c+"px"),a.addMoreDiv(g);DateUtil.daysDifferenceDirection(f,e)>=0;){var l=this.getCalendarDayObjByDate(f);d=l.getDate(),g=$("<div/>"),g.addClass("JFrontierCal-Agenda-More-Link"),g.css("position","absolute"),h=this.getAgendaItemsForDay(d),g.html("+ more ("+h.length+")"),g.bind("click",{cal:this,calDayDate:d,agendaItems:h},function(a){a.stopPropagation(),Calendar.showMoreAgendaModal(a.data.cal,a.data.calDayDate,a.data.agendaItems)}),g.hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")}),i=l.getY()+l.getHeight()-c-1,j=l.getX(),k=l.getWidth(),g.css("top",i+"px"),g.css("left",j+"px"),g.css("width",k+"px"),g.css("height",c+"px"),l.addMoreDiv(g),f=DateUtil.getNextDay(f)}}},this.addAgendaDivToDays=function(a,b,c,d){if(null!=a&&null!=b&&null!=c&&null!=d){a.addAgendaDivElement(d,c);for(var e=a.getDate(),f=b.getDate(),g=DateUtil.getNextDay(e);DateUtil.daysDifferenceDirection(g,f)>=0;){var h=this.getCalendarDayObjByDate(g);h.addAgendaDivElement(d,c),g=DateUtil.getNextDay(g)}}},this.getNextAgendaYPosition=function(a,b,c,d){if(null==a||null==b||null==c||null==d)return-1;var e=0,f=a.getY();e=f;for(var g,h,i,j=null,k=!1,l=null,m=1;!k;){for(l=new Array,f=a.getNextAgendaYstartY(f,c,d),f>e&&(e=f),l.push(f),g=a.getDate(),h=b.getDate(),i=DateUtil.getNextDay(g);DateUtil.daysDifferenceDirection(i,h)>=0;)j=this.getCalendarDayObjByDate(i),f=j.getNextAgendaYstartY(f,c,d),f>e&&(e=f),l.push(f),i=DateUtil.getNextDay(i);if(f=l[0],0>f)return-1;if(1==l.length)return f;for(var n=!0,o=1;o<l.length;o++){if(l[o]<0)return-1;Math.abs(f-l[o])>1&&(n=!1)}if(n)return f;f=e,m+=1}return f},this.getCalendarDayObjByDate=function(a){if(null==a||null==this.dayHash)return null;var b=a.getFullYear()+""+(a.getMonth()+"")+(a.getDate()+"");return this.dayHash.get(b)},this.setDisplayDate=function(a){this.displayDate=a,this.do_init(),this.resize()},this.getDisplayDate=function(){var a=new Date(this.getCurrentYear(),this.getCurrentMonth(),this.getCurrentDay(),0,0,0,0);return a},this.nextMonth=function(){var a=new Date(0,0,1,0,0,0,0);11==this.displayDate.getMonth()?(a.setFullYear(this.displayDate.getFullYear()+1),a.setMonth(0)):(a.setFullYear(this.displayDate.getFullYear()),a.setMonth(this.displayDate.getMonth()+1)),this.setDisplayDate(a)},this.previousMonth=function(){var a=new Date(0,0,1,0,0,0,0);0==this.displayDate.getMonth()?(a.setFullYear(this.displayDate.getFullYear()-1),a.setMonth(11)):(a.setFullYear(this.displayDate.getFullYear()),a.setMonth(this.displayDate.getMonth()-1)),this.setDisplayDate(a)},this.buildCalendarHeader=function(){var a=$("<div/>");a.css("width",this.getWidth()+"px");var b=new CalendarHeader(a);return b},this.buildCalendarWeek=function(){var a=$("<div/>");a.addClass("JFrontierCal-Week-Cell"),a.css("width",this.getWidth()+"px");var b=new CalendarWeek(a);return b},this.buildCalendarWeekHeader=function(){var a=$("<div/>");a.css("width",this.getWidth()+"px");var b=new CalendarWeekHeader(a);return b},this.buildCalendarHeaderCell=function(){var a=$("<div/>");a.addClass("JFrontierCal-Header-Cell");var b=new CalendarHeaderCell(a);return b},this.buildCalendarWeekHeaderCell=function(){var a=$("<div/>");a.addClass("JFrontierCal-Week-Header-Cell");var b=new CalendarWeekHeaderCell(a);return b},this.buildCalendarDayCell=function(){var a=$("<div/>");a.addClass("JFrontierCal-Day-Cell");var b=new CalendarDayCell(a);return b},this.getCurrentYear=function(){return parseInt(this.displayDate.getFullYear())},this.getCurrentMonth=function(){return parseInt(this.displayDate.getMonth())},this.getCurrentDay=function(){return parseInt(this.displayDate.getDate())},this.getNextMonth=function(){var a=new Date(0,0,1,0,0,0,0);return 11==this.getCurrentMonth()?(a.setFullYear(this.getCurrentYear()+1),a.setMonth(0)):(a.setFullYear(this.getCurrentYear()),a.setMonth(this.getCurrentMonth()+1)),a},this.getPreviousMonth=function(){var a=new Date(0,0,1,0,0,0,0);return 0==this.getCurrentMonth()?(a.setFullYear(this.getCurrentYear()-1),a.setMonth(11)):(a.setFullYear(this.getCurrentYear()),a.setMonth(this.getCurrentMonth()-1)),a},this.getDaysCurrentMonth=function(){return parseInt(DateUtil.getDaysInMonth(this.displayDate))},this.getDaysPreviousMonth=function(){var a=this.getPreviousMonth();return parseInt(DateUtil.getDaysInMonth(a))},this.getDaysNextMonth=function(){var a=this.getNextMonth();return parseInt(DateUtil.getDaysInMonth(a))},this.setHtml=function(a){this.jqyObj.html(a)},this.getHtml=function(){return this.jqyObj.html()},this.setCss=function(a,b){this.jqyObj.css(a,b)},this.getCss=function(a){return this.jqyObj.css(a)},this.setAttr=function(a,b){this.jqyObj.attr(a,b)},this.getAttr=function(a){return this.jqyObj.attr(a)},this.clear=function(a){this.jqyObj.html(""),this.calHeaderObj=null,this.weeks=new Array,this.weekHeaders=new Array,this.dayHash=new Hashtable,a&&(this.agendaItems=new Hashtable)},this.getHeight=function(){return this.jqyObj.height()},this.getWidth=function(){return this.jqyObj.width()},this.setWidth=function(a){this.jqyObj.width(a),this.resize()},this.getInnerWidth=function(){return this.jqyObj.innerWidth()},this.addHeader=function(a){if(null!=this.calHeaderObj){var b=this.jqyObj.children("div").first();b.remove(),this.calHeaderObj=a,this.jqyObj.prepend(a.jqyObj)}else this.calHeaderObj=a,this.jqyObj.prepend(a.jqyObj)},this.addWeek=function(a){this.weeks.push(a),this.jqyObj.append(a.jqyObj)},this.addWeekHeader=function(a){this.weekHeaders.push(a),this.jqyObj.append(a.jqyObj)},this.getWeeks=function(){return this.weeks},this.getWeekHeaders=function(){return this.weekHeaders},this.getNumberWeeks=function(){return this.weeks.length},this.addAgendaItem=function(a){0==a.getAgendaId()&&(a.setAgendaId(this.agendaId),this.agendaId++),this.agendaItems.put(a.getAgendaId(),a),this.renderSingleAgendaItem(a)},this.getAgendaItemsCount=function(){return this.agendaItems.size()},this.getAgendaItems=function(){return this.agendaItems},this.getAgendaItemById=function(a){return this.agendaItems.get(a)},this.getAgendaItemByDataAttr=function(a,b){if(null!=this.agendaItems&&this.agendaItems.size()>0){for(var c=null,d=null,e=new Array,f=this.agendaItems.values(),g=0;g<f.length;g++)c=f[g],d=c.getAgendaData(a),null!=d&&d==b&&e.push(c);return e}return null},this.deleteAgendaItemById=function(a){null!=this.agendaItems&&this.agendaItems.size()>0&&(this.agendaItems.remove(a),this.clearDayCellData(),this.renderAgendaItems())},this.deleteAgendaItemByDataAttr=function(a,b){if(null!=this.agendaItems&&this.agendaItems.size()>0){for(var c=null,d=null,e=new Array,f=this.agendaItems.values(),g=0;g<f.length;g++)c=f[g],d=c.getAgendaData(a),null!=d&&d==b&&e.push(c);if(e.length>0){for(var h=0;h<e.length;h++)this.deleteAgendaItemById(e[h].getAgendaId());this.clearDayCellData(),this.renderAgendaItems()}}},this.deleteAllAgendaItems=function(){null!=this.agendaItems&&this.agendaItems.size()>0&&(this.agendaItems=new Hashtable,this.clearDayCellData(),this.renderAgendaItems())},this.appendJqyObj=function(a){this.jqyObj.append(a)},this.shoutOut=function(){alert("You have a calendar object!")},this.clearDayCellData=function(){var a=0,b=this.getWeeks();if(null!=b&&b.length>0){a=b.length;for(var c=0;c<b.length;c++){var d=b[c].getDays();if(null!=d&&d.length>0)for(var e=0;e<d.length;e++)d[e].clearAgendaDivElements()}}},this.setRenderRatio=function(a){null!=a&&1>=a&&a>0&&(this.aspectRatio=a,this.resize())},this.resize=function(){var a=null,b=null,c=null,d=null,e=null,f=this.getWidth(),g=this.getWeeks();if(null!=g&&g.length>0){var h=g[0].getDays();null!=h&&h.length>0&&(a=h[0])}var i=this.getWeekHeaders();if(null!=i&&i.length>0){var j=i[0].getHeaderCells();null!=j&&j.length>0&&(b=j[0])}var k=b.jqyObj.outerHeight(!0),l=(a.jqyObj.outerWidth(!0)-a.jqyObj.width())*Calendar.dayNames.length,m=Math.floor(f/Calendar.dayNames.length)-(a.jqyObj.outerWidth(!0)-a.jqyObj.width()),n=m+(f-m*Calendar.dayNames.length)-(a.jqyObj.outerWidth(!0)-a.jqyObj.width())-l,o=parseInt((m-k)*this.aspectRatio),p=6*m+n+(a.jqyObj.outerWidth(!0)-a.jqyObj.width())*Calendar.dayNames.length+1;
this.calHeaderObj.setWidth(p);var q=this.calHeaderObj.getHeaderCells();if(null!=q&&q.length>0)for(var r=0;r<q.length;r++)r==q.length-1?q[r].setCss("width",n+"px"):(q[r].setCss("width",m+"px"),d=q[r]);var s=0,t=this.getWeeks(),u=this.getWeekHeaders();if(null!=t&&t.length>0){s=t.length;for(var v=0;v<t.length;v++){t[v].setWidth(p),u[v].setWidth(p);var w=t[v].getDays(),x=u[v].getHeaderCells();if(null!=w&&w.length>0)for(var y=0;y<w.length;y++)y==w.length-1?(w[y].setCss("width",n+"px"),x[y].setCss("width",n+"px"),w[y].setCss("height",o+"px"),w[y].clearAgendaDivElements()):(w[y].setCss("width",m+"px"),x[y].setCss("width",m+"px"),w[y].setCss("height",o+"px"),w[y].clearAgendaDivElements(),c=w[y],e=x[y])}}var z=parseInt(d.jqyObj.outerHeight(!0)),A=parseInt(c.jqyObj.outerHeight(!0)*s),B=parseInt(e.jqyObj.outerHeight(!0)*s),C=z+A+B;this.setCss("height",C+"px"),this.renderAgendaItems()},this.getWeekIndex=function(a){return"SUN"==a.toUpperCase()||"SUNDAY"==a.toUpperCase()?0:"MON"==a.toUpperCase()||"MONDAY"==a.toUpperCase()?1:"TUE"==a.toUpperCase()||"TUESDAY"==a.toUpperCase()?2:"WED"==a.toUpperCase()||"WEDNESDAY"==a.toUpperCase()?3:"THU"==a.toUpperCase()||"THURSDAY"==a.toUpperCase()?4:"FRI"==a.toUpperCase()||"FRIDAY"==a.toUpperCase()?5:"SAT"==a.toUpperCase()||"SATURDAY"==a.toUpperCase()?6:-1}}function DateUtil(){}function LogUtil(){}var allOptions=new Array,myCalendars=new Hashtable;String.prototype.startsWith=function(a){return this.match("^"+a)==a},Calendar.dayNames=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),Calendar.sortAgendaItemsByStartDate=function(a,b){var c=a.getStartDate(),d=b.getStartDate(),e=DateUtil.secondsDifferenceDirection(c,d);return e>0?-1:0>e?1:0},Calendar.buildUserAgendaObject=function(a){if(null==a)return null;var b=null,c=a.getAgendaDataHash();if(null!=c&&c.size()>0){b=new Object;for(var d=null,e=null,f=c.keys(),g=0;g<f.length;g++)d=f[g],e=c.get(d),b[d]=e}var h=new Object;h.backgroundColor=a.getBackgroundColor(),h.foregroundColor=a.getForegroundColor();var i={agendaId:a.getAgendaId(),title:a.getTitle(),startDate:a.getStartDate(),endDate:a.getEndDate(),allDay:!!a.isAllDay(),data:b,displayProp:h};return i},Calendar.showMoreAgendaModal=function(a,b,c){null!=a&&null!=b&&null!=c||alert("Can't open dialog. One ore more of Calendar/Date/agendaItems parameters are null.");var d=a.jqyObj.attr("id")+"-more-agenda-modal",e=0!=$("#"+d).length;e&&($("#"+d).dialog("destroy"),$("#"+d).remove());var f=$("<div/>");f.attr("id",d),f.attr("title","Agenda Items for "+b.toDateString()),f.dialog({autoOpen:!1,height:350,width:400,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}},open:function(a,b){},close:function(){}});var g=null,h=null;f.append("<br>"),c.sort(Calendar.sortAgendaItemsByStartDate);for(var i=!1,j=!1,k=null,l=null,m=0;m<c.length;m++){if(g=c[m],k=g.getStartDate(),l=g.getEndDate(),h=$("<div/>"),h.addClass("JFrontierCal-Modal-Agenda-Item"),null!=g.getBackgroundColor()&&h.css("background-color",g.getBackgroundColor()),null!=g.getForegroundColor()&&h.css("color",g.getForegroundColor()),h.css("width","100%"),h.css("height","30px"),h.css("margin-bottom","2px"),i=0==DateUtil.daysDifferenceDirection(k,b),j=0==DateUtil.daysDifferenceDirection(l,b),i)h.css("-moz-border-radius-bottomleft","3px"),h.css("-moz-border-radius-topleft","3px"),h.css("-webkit-border-bottom-left-radius","3px"),h.css("-webkit-border-top-left-radius","3px");else{var n=$("<span/>");n.css("float","left"),n.addClass("ui-icon ui-icon-circle-triangle-w"),h.append(n)}if(j)h.css("-moz-border-radius-topright","3px"),h.css("-moz-border-radius-bottomright","3px"),h.css("-webkit-border-top-right-radius","3px"),h.css("-webkit-border-bottom-right-radius","3px");else{var n=$("<span/>");n.css("float","right"),n.addClass("ui-icon ui-icon-circle-triangle-e"),h.append(n)}h.append(g.getTitle()+"<br>"),g.isAllDay()||h.append("From "+DateUtil.getAgendaDisplayTime(k)+" on "+k.toDateString()+" To "+DateUtil.getAgendaDisplayTime(l)+" "+l.toDateString()+"<br>"),null!=a.clickEvent_agendaCell&&h.bind("click",{agendaId:g.getAgendaId(),callBack:a.clickEvent_agendaCell,dialog:f},a.clickAgendaFromCalendarMoreModalDialogHandler),h.hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")}),f.append(h)}f.dialog("open")},Calendar.loadICalSource=function(a,b,c){null!=a&&null!=b&&$.ajax({url:b,type:"POST",data:{chromeFix:""},dataType:c,success:function(c){if(null==c||""==c)return void alert("iCal load error: Returned data was null or empty string.\n\nSource, "+b);if(icalParser.clear(),icalParser.parseIcal(c),icalParser.ical.events.length>0)for(var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=0;t<icalParser.ical.events.length;t++)if(d=icalParser.ical.events[t],e=null!=d.summary?d.summary.value:"",f=(null!=d.dtstart?d.dtstart.value:"").substring(0,4),g=(null!=d.dtstart?d.dtstart.value:"").substring(4,6).replace(/^[0]+/g,""),h=(null!=d.dtstart?d.dtstart.value:"").substring(6,8).replace(/^[0]+/g,""),i=(null!=d.dtstart?d.dtstart.value:"").substring(9,11).replace(/^[0]+/g,""),j=(null!=d.dtstart?d.dtstart.value:"").substring(11,13).replace(/^[0]+/g,""),k=(null!=d.dtstart?d.dtstart.value:"").substring(13,15).replace(/^[0]+/g,""),""==i&&(i="0"),""==j&&(j="0"),""==k&&(k="0"),l=(null!=d.dtend?d.dtend.value:"").substring(0,4),m=(null!=d.dtend?d.dtend.value:"").substring(4,6).replace(/^[0]+/g,""),n=(null!=d.dtend?d.dtend.value:"").substring(6,8).replace(/^[0]+/g,""),o=(null!=d.dtend?d.dtend.value:"").substring(9,11).replace(/^[0]+/g,""),p=(null!=d.dtend?d.dtend.value:"").substring(11,13).replace(/^[0]+/g,""),q=(null!=d.dtend?d.dtend.value:"").substring(13,15).replace(/^[0]+/g,""),""==o&&(o="0"),""==p&&(p="0"),""==q&&(q="0"),r=new Date(parseInt(f),parseInt(g)-1,parseInt(h),parseInt(i)-1,parseInt(j),parseInt(k),0),s=new Date(parseInt(l),parseInt(m)-1,parseInt(n),parseInt(o)-1,parseInt(p),parseInt(q),0),DateUtil.secondsDifferenceDirection(r,s)>=0){var u=new Hashtable;u.put("UID",null!=d.uid?d.uid.value:""),u.put("SUMMARY",null!=d.summary?d.summary.value:""),u.put("DTSTART",null!=d.dtstart?d.dtstart.value:""),u.put("DTEND",null!=d.dtend?d.dtend.value:""),u.put("CLASS",null!=d.classification?d.classification.value:""),u.put("CREATED",null!=d.created?d.created.value:""),u.put("DESCRIPTION",null!=d.description?d.description.value:""),u.put("GEO",null!=d.geo?d.geo.value:""),u.put("LAST-MODIFIED",null!=d.lastmod?d.lastmod.value:""),u.put("LOCATION",null!=d.location?d.location.value:""),u.put("ORGANIZER",null!=d.organizer?d.organizer.value:""),u.put("PRIORITY",null!=d.priority?d.priority.value:""),u.put("DTSTAMP",null!=d.dtstamp?d.dtstamp.value:""),u.put("SEQUENCE",null!=d.seq?d.seq.value:""),u.put("STATUS",null!=d.status?d.status.value:""),u.put("TRANSP",null!=d.transp?d.transp.value:""),u.put("URL",null!=d.url?d.url.value:""),u.put("RECURRENCE-ID",null!=d.recurid?d.recurid.value:""),u.put("DURATION",null!=d.duration?d.duration.value:""),u.put("ATTACH",null!=d.attach?d.attach.value:""),u.put("ATTENDEE",null!=d.attendee?d.attendee.value:""),u.put("CATEGORIES",null!=d.categories?d.categories.value:""),u.put("COMMENT",null!=d.comment?d.comment.value:""),u.put("CONTACT",null!=d.contact?d.contact.value:""),u.put("EXDATE",null!=d.exdate?d.exdate.value:""),u.put("EXRULE",null!=d.exrule?d.exrule.value:""),u.put("REQUEST-STATUS",null!=d.rstatus?d.rstatus.value:""),u.put("RELATED",null!=d.related?d.related.value:""),u.put("RESOURCES",null!=d.resources?d.resources.value:""),u.put("RDATE",null!=d.rdate?d.rdate.value:""),u.put("RRULE",null!=d.rrule?d.rrule.value:""),u.put("X-",null!=d.xprop?d.xprop.value:"");var v=new CalendarAgendaItem(e,r,s,!1,u);a.addAgendaItem(v)}},error:function(a,c,d){alert("iCal load error: Failure in requesting "+b+": "+d)}})},DateUtil.getDaysInMonth=function(a){return 32-new Date(a.getFullYear(),a.getMonth(),32).getDate()},DateUtil.isDateBetween=function(a,b,c){return null==a||null==b||null==c?!1:DateUtil.daysDifferenceDirection(a,b)<=0&&DateUtil.daysDifferenceDirection(a,c)>=0},DateUtil.daysDifference=function(a,b){var c=864e5,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),e=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0),f=d.getTime(),g=e.getTime(),h=Math.abs(g-f),i=h/c;return i},DateUtil.daysDifferenceDirection=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);return(d.getTime()-c.getTime())/864e5},DateUtil.secondsDifferenceDirection=function(a,b){return Math.round((b.getTime()-a.getTime())/1e3)},DateUtil.getNextDay=function(a){var b=(a.getDay(),a.getDate()),c=a.getMonth(),d=a.getFullYear(),e=DateUtil.getDaysInMonth(a);return b==e?11==d?new Date(d+1,c+1,1,0,0,0,0):new Date(d,c+1,1,0,0,0,0):new Date(d,c,b+1,0,0,0,0)},DateUtil.addDays=function(a,b){return new Date(a.getTime()+24*b*60*60*1e3)},DateUtil.getPreviousMonth=function(a){var b=new Date(0,0,1,0,0,0,0);return 0==b.getMonth()?(b.setFullYear(a.getFullYear()-1),b.setMonth(11)):(b.setFullYear(a.getFullYear()),b.setMonth(a.getMonth()-1)),b},DateUtil.getFirstDayInSameWeek=function(a){var b=a.getDay(),c=a.getDate(),d=a.getMonth(),e=a.getFullYear();DateUtil.getDaysInMonth(a);if(0==b)return new Date(e,d,c,0,0,0,0);var f=c-b;if(1>f){var g=DateUtil.getPreviousMonth(a),h=DateUtil.getDaysInMonth(g),i=h+f;return 0==d?new Date(e-1,11,i,0,0,0,0):new Date(e,d-1,i,0,0,0,0)}return new Date(e,d,f,0,0,0,0)},DateUtil.getLastDayInSameWeek=function(a){var b=a.getDay(),c=a.getDate(),d=a.getMonth(),e=a.getFullYear(),f=DateUtil.getDaysInMonth(a);if(6==b)return new Date(e,d,c,0,0,0,0);var g=6-b;if(c+g>f){var h=g-(f-c);return 11==e?new Date(e+1,d+1,h,0,0,0,0):new Date(e,d+1,h,0,0,0,0)}return new Date(e,d,c+g,0,0,0,0)},DateUtil.getFirstDayNextWeek=function(a){var b=a.getDay(),c=a.getDate(),d=a.getMonth(),e=a.getFullYear(),f=DateUtil.getDaysInMonth(a);if(0==b)return new Date(e,d,c,0,0,0,0);var g=6-b,h=c+g+1;if(h>f){var i=g-(f-c)+1;return 11==e?new Date(e+1,d+1,i,0,0,0,0):new Date(e,d+1,i,0,0,0,0)}return new Date(e,d,h,0,0,0,0)},DateUtil.getAgendaDisplayTime=function(a){if(null==a)return"";var b=":",c=a.getHours(),d=a.getMinutes(),e="am";return 0==d?(d="",b=""):10>d&&(d="0"+d),0==c?c=12:c>12&&(c-=12,e="pm"),c+b+d+e},LogUtil.log=function(a){},$.fn.jFrontierCal=function(a,b){var c,d=$(this).attr("id"),e={foo:"bar",date:new Date,dayClickCallback:function(a){},agendaClickCallback:function(a){a.stopPropagation()},agendaDropCallback:function(a){},agendaMouseoverCallback:function(a){},applyAgendaTooltipCallback:function(a,b){},agendaDragStartCallback:function(a,b,c){},agendaDragStopCallback:function(a,b,c){},dragAndDropEnabled:!0};if($.isPlainObject(a)){var b=a;c=$.extend(e,b),allOptions[d]=c}else c=$.extend(e,b),allOptions[d]=c;return this.each(function(){var a=$(this);if(!a.data("plugin")){var b=allOptions[d],c=new jFrontierCalPlugin(a,b.dayClickCallback,b.agendaClickCallback,b.agendaDropCallback,b.dragAndDropEnabled,b.agendaMouseoverCallback,b.applyAgendaTooltipCallback,b.agendaDragStartCallback,b.agendaDragStopCallback);c.init(),a.data("plugin",c)}})};var jFrontierCalPlugin=function(a,b,c,d,e,f,g,h,i){function j(a){return null!=a&&a.startsWith("#")?a.substring(1,a.length):a}var k=a.attr("id"),l=b,m=c,n=d,o=f,p=g,q=h,r=i;this.init=function(){var b=new Date,c=new Calendar;return c.initialize(a,b,l,m,n,e,o,p,q,r),myCalendars.put(k,c),$(window).wresize(this.doResizeAll),this.doResizeAll(),this.doResizeAll(),c},this.addAgendaItem=function(a,b,c,d,e,f,g){if(null!=a&&null!=b&&null!=c&&null!=d&&null!=e){if(DateUtil.secondsDifferenceDirection(c,d)<0)return void alert("Sorry, you can't create an event that ends before it starts");a=j(a);var h=new Hashtable;if(null!=f)for(var i in f)h.put(i,f[i]);var k=new CalendarAgendaItem(b,c,d,e,h);null!=g&&(null!=g.backgroundColor&&k.setBackgroundColor(g.backgroundColor),null!=g.foregroundColor&&k.setForegroundColor(g.foregroundColor));var l=myCalendars.get(a);l.addAgendaItem(k)}},this.getAllAgendaItems=function(a){var b=new Array;if(null!=a){a=j(a);var c=myCalendars.get(a),d=c.getAgendaItems();if(null!=d&&d.size()>0)for(var e=null,f=d.values(),g=0;g<f.length;g++){var h=f[g];e=Calendar.buildUserAgendaObject(h),b.push(e)}}return b},this.getAgendaItemById=function(a,b){if(null!=a&&null!=b){a=j(a);var c=myCalendars.get(a),d=c.getAgendaItemById(parseInt(b));return null==d?null:Calendar.buildUserAgendaObject(d)}},this.getAgendaItemByDataAttr=function(a,b,c){if(null!=a&&null!=b&&null!=c){var d=new Array;a=j(a);var e=myCalendars.get(a),f=e.getAgendaItemByDataAttr(b,c);if(null!=f&&f.length>0)for(var g=null,h=0;h<f.length;h++){var i=f[h];g=Calendar.buildUserAgendaObject(i),d.push(g)}return d}return null},this.deleteAgendaItemById=function(a,b){if(null!=a&&null!=b){a=j(a);var c=myCalendars.get(a);c.deleteAgendaItemById(b)}},this.deleteAgendaItemByDataAttr=function(a,b,c){if(null!=a&&null!=b&&null!=c){a=j(a);var d=myCalendars.get(a);d.deleteAgendaItemByDataAttr(b,c)}},this.deleteAllAgendaItems=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);b.deleteAllAgendaItems()}},this.getAgendaItemsCount=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);return b.getAgendaItemsCount()}},this.showPreviousMonth=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);b.previousMonth()}},this.showNextMonth=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);b.nextMonth()}},this.showMonth=function(a,b,c){if(null!=a&&null!=b&&null!=c&&4==b.length&&(1==c.length||2==c.length)){a=j(a),c=c.replace(/^[0]+/g,""),""===c&&(c="0");var d=parseInt(b),e=parseInt(c),f=new Date(d,e,1,0,0,0,0),g=myCalendars.get(a);g.setDisplayDate(f)}},this.getCurrentDate=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);return b.getDisplayDate()}},this.reRenderAgendaItems=function(a){if(null!=a){a=j(a);var b=myCalendars.get(a);b.clearDayCellData(),b.renderAgendaItems()}},this.doResizeAll=function(){if(null!=myCalendars&&myCalendars.size()>0)for(var a=myCalendars.values(),b=0;b<a.length;b++)a[b].resize()},this.doResize=function(a){if(null!=myCalendars&&myCalendars.size()>0&&null!=a){a=j(a);var b=myCalendars.get(a);b.resize()}},this.setAspectRatio=function(a,b){if(null!=a&&null!=b)if(b>1||0>=b)alert("Ratio is out of range. Ratio must be less than or equal to 1, and greater than 0.");else{a=j(a);var c=myCalendars.get(a);c.setRenderRatio(b)}},this.loadICalSource=function(a,b,c){if(null!=a&&null!=b){a=j(a);var d=myCalendars.get(a);Calendar.loadICalSource(d,b,c)}}},icalParser={ical:{version:"",prodid:"",events:[],todos:[],journals:[],freebusys:[]},test:function(){alert("icalParser test is good!")},clear:function(){this.ical.version="",this.ical.prodid="",this.ical.events=[],this.ical.todos=[],this.ical.journals=[],this.ical.freebusys=[]},parseIcal:function(a){this.ical.version=this.getValue("VERSION",a,!1),this.ical.prodid=this.getValue("PRODID",a,!1);var b=/BEGIN:VEVENT(\r?\n[^B].*)+/g,c=a.match(b);if(c)for(i=0;i<c.length;i++)this.parseVevent(c[i]);if(b=/BEGIN:VTODO(\r?\n[^B].*)+/g,c=a.match(b))for(i=0;i<c.length;i++)this.parseVtodo(c[i]);if(b=/BEGIN:VJOURNAL(\r?\n[^B].*)+/g,c=a.match(b))for(i=0;i<c.length;i++)this.parseVjournal(c[i]);if(b=/BEGIN:VFREEBUSY(\r?\n[^B].*)+/g,c=a.match(b))for(i=0;i<c.length;i++)this.parseVfreebusy(c[i])},parseVfreebusy:function(a){var b={contact:this.getValue("CONTACT",a,!1),dtstart:this.getValue("DTSTART",veventString,!1),dtend:this.getValue("DTEND",veventString,!1),duration:this.getValue("DURATION",a,!1),description:this.getValue("DESCRIPTION",a,!1),dtstamp:this.getValue("DTSTAMP",a,!1),organizer:this.getValue("ORGANIZER",a,!1),uid:this.getValue("UID",a,!1),url:this.getValue("URL",a,!1),attendee:this.getValue("ATTENDEE",a,!0),comment:this.getValue("COMMENT",a,!0),freebusy:this.getValue("FREEBUSY",a,!0),rstatus:this.getValue("REQUEST-STATUS",a,!0),xprop:this.getValue("X-",a,!0)};this.ical.freebusys[this.ical.freebusys.length]=b},parseVjournal:function(a){var b={classification:this.getValue("CLASS",a,!1),created:this.getValue("CREATED",a,!1),description:this.getValue("DESCRIPTION",a,!1),dtstart:this.getValue("DTSTART",veventString,!1),dtstamp:this.getValue("DTSTAMP",a,!1),lastmod:this.getValue("LAST-MODIFIED",a,!1),organizer:this.getValue("ORGANIZER",a,!1),recurid:this.getValue("RECURRENCE-ID",a,!1),seq:this.getValue("SEQUENCE",a,!1),status:this.getValue("STATUS",a,!1),summary:this.getValue("SUMMARY",a,!1),uid:this.getValue("UID",a,!1),url:this.getValue("URL",a,!1),attach:this.getValue("ATTACH",a,!0),attendee:this.getValue("ATTENDEE",a,!0),categories:this.getValue("CATEGORIES",a,!0),comment:this.getValue("COMMENT",a,!0),contact:this.getValue("CONTACT",a,!0),exdate:this.getValue("EXDATE",a,!0),exrule:this.getValue("EXRULE",a,!0),related:this.getValue("RELATED",a,!0),rdate:this.getValue("RDATE",a,!0),rrule:this.getValue("RRULE",a,!0),rstatus:this.getValue("REQUEST-STATUS",a,!0),xprop:this.getValue("X-",a,!0)};this.ical.journals[this.ical.journals.length]=b},parseVtodo:function(a){var b={classification:this.getValue("CLASS",a,!1),completed:this.getValue("COMPLETED",a,!1),created:this.getValue("CREATED",a),description:this.getValue("DESCRIPTION",a,!1),dtstamp:this.getValue("DTSTAMP",a,!1),geo:this.getValue("GEO",a,!1),lastmod:this.getValue("LAST-MODIFIED",a,!1),location:this.getValue("LOCATION",a,!1),organizer:this.getValue("ORGANIZER",a,!1),percent:this.getValue("PERCENT-COMPLETE",a,!1),priority:this.getValue("PRIORITY",a,!1),recurid:this.getValue("RECURRENCE-ID",a,!1),seq:this.getValue("SEQUENCE",a,!1),status:this.getValue("STATUS",a,!1),summary:this.getValue("SUMMARY",a,!1),uid:this.getValue("UID",a,!1),url:this.getValue("URL",a,!1),due:this.getValue("DUE",a,!1),duration:this.getValue("DURATION",a,!1),attach:this.getValue("ATTACH",a,!0),attendee:this.getValue("ATTENDEE",a,!0),categories:this.getValue("CATEGORIES",a,!0),comment:this.getValue("COMMENT",a,!0),contact:this.getValue("CONTACT",a,!0),exdate:this.getValue("EXDATE",a,!0),exrule:this.getValue("EXRULE",a,!0),rstatus:this.getValue("REQUEST-STATUS",a,!0),related:this.getValue("RELATED",a,!0),resources:this.getValue("RESOURCES",a,!0),rdate:this.getValue("RDATE",a,!0),rrule:this.getValue("RRULE",a,!0),xprop:this.getValue("X-",a,!0)};this.ical.todos[this.ical.todos.length]=b},parseVevent:function(a){var b={classification:this.getValue("CLASS",a,!1),created:this.getValue("CREATED",a,!1),description:this.getValue("DESCRIPTION",a,!1),geo:this.getValue("GEO",a,!1),lastmod:this.getValue("LAST-MODIFIED",a,!1),location:this.getValue("LOCATION",a,!1),organizer:this.getValue("ORGANIZER",a,!1),priority:this.getValue("PRIORITY",a,!1),dtstamp:this.getValue("DTSTAMP",a,!1),seq:this.getValue("SEQUENCE",a,!1),status:this.getValue("STATUS",a,!1),transp:this.getValue("TRANSP",a,!1),url:this.getValue("URL",a,!1),recurid:this.getValue("RECURRENCE-ID",a,!1),duration:this.getValue("DURATION",a,!1),attach:this.getValue("ATTACH",a,!0),attendee:this.getValue("ATTENDEE",a,!0),categories:this.getValue("CATEGORIES",a,!0),comment:this.getValue("COMMENT",a,!0),contact:this.getValue("CONTACT",a,!0),exdate:this.getValue("EXDATE",a,!0),exrule:this.getValue("EXRULE",a,!0),rstatus:this.getValue("REQUEST-STATUS",a,!0),related:this.getValue("RELATED",a,!0),resources:this.getValue("RESOURCES",a,!0),rdate:this.getValue("RDATE",a,!0),rrule:this.getValue("RRULE",a,!0),xprop:this.getValue("X-",a,!0),uid:this.getValue("UID",a,!1),summary:this.getValue("SUMMARY",a,!1),dtstart:this.getValue("DTSTART",a,!1),dtend:this.getValue("DTEND",a,!1)};this.ical.events[this.ical.events.length]=b},getValue:function(propName,txt,multiple){if(!multiple){var reg=new RegExp("("+propName+")(;[^=]*=[^;:\n]*)*:([^\n]*)","g"),matches=reg.exec(txt);if(matches){var valeur=RegExp.$3,tab_params;if(RegExp.$2.length>0){var params=RegExp.$2.substr(1).split(";"),pair,code="";for(k=0;k<params.length;k++)pair=params[k].split("="),pair[1]||(pair[1]=pair[0]),code+=pair[0].replace(/-/,"")+' : "'+pair[1]+'", ';eval("tab_params=( { "+code.substr(0,code.length-2)+" } );")}return{value:valeur,params:tab_params}}return null}eval("var matches=txt.match(/\\n"+propName+"[^:]*/g)");var props=[];if(matches){for(l=0;l<matches.length;l++)matches[l]=matches[l].replace(/;.*/,""),props[props.length]=this.getValue(matches[l],txt);return props}}}}(jQuery),function(a){a.fn.wresize=function(b){function c(){if(a.browser.msie)if(wresize.fired){var b=parseInt(a.browser.version,10);if(wresize.fired=!1,7>b)return!1;if(7==b){var c=a(window).width();if(c!=wresize.width)return wresize.width=c,!1}}else wresize.fired=!0;return!0}function d(a){return c()?b.apply(this,[a]):void 0}return version="1.1",wresize={fired:!1,width:0},this.each(function(){this==window?a(this).resize(d):a(this).resize(b)}),this}}(jQuery);